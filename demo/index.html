<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snoonu MerchantOS - Hackathon Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@1,900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        snoonu: {
                            red: '#E53E3E',
                            darkRed: '#C53030',
                            lightRed: '#FED7D7',
                            black: '#1A202C',
                            darkGray: '#2D3748',
                            gray: '#4A5568',
                            lightGray: '#E2E8F0',
                            white: '#FFFFFF',
                            'dark-red': '#FF6B6B',
                            'dark-darkRed': '#FF5252',
                            'dark-lightRed': '#2D1810',
                            'dark-black': '#0F0F0F',
                            'dark-darkGray': '#1A1A1A',
                            'dark-gray': '#2A2A2A',
                            'dark-lightGray': '#404040',
                            'dark-white': '#F5F5F5',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        .animate-pulse-slow {
            animation: pulse 3s ease-in-out infinite;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .theme-transition {
            transition: all 0.3s ease;
        }

        /* Marquee Animation for Ticker */
        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        .animate-marquee {
            animation: marquee 20s linear infinite;
        }

        /* Radar Scanning Animation */
        @keyframes scan {
            0% { left: 0%; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { left: 100%; opacity: 0; }
        }
        .animate-scan {
            animation: scan 4s linear infinite;
        }

        /* Force Dark Mode on Dropdown Options */
        .dark option {
            background-color: #1a0505; /* Dark Red/Black */
            color: white;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 dark:bg-black dark:text-white transition-colors duration-300">
    <!-- Dark Mode Background Wrapper -->
    <div class="min-h-screen dark:bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] dark:from-[#4a0404] dark:via-[#1a0505] dark:to-black">
        <!-- Header -->
    <header class="bg-[#ED1C24] text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center gap-1 group cursor-pointer">
                        <div class="w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-lg transform group-hover:rotate-3 transition-transform">
                            <span class="text-snoonu-red text-3xl font-black italic pr-1" style="font-family: 'Montserrat', sans-serif;">S</span>
                        </div>

                        <div class="text-white text-3xl font-black italic tracking-tighter" style="font-family: 'Montserrat', sans-serif; text-shadow: 2px 2px 0px rgba(0,0,0,0.1);">
                            noonu
                        </div>
                    </div>
                    <div class="text-white/80 font-medium text-sm tracking-widest uppercase ml-3 border-l border-white/20 pl-3">MerchantOS</div>
                    <div class="ml-4 relative">
                        <select id="verticalSwitcher" class="
                            appearance-none cursor-pointer
                            bg-white text-snoonu-black
                            dark:bg-black/80 dark:text-white dark:border-red-500/50
                            border-2 border-transparent
                            px-4 py-2 pr-8 rounded-xl font-bold text-sm
                            focus:outline-none focus:ring-2 focus:ring-red-500
                            transition-all shadow-lg
                        ">
                            <option value="restaurant">üçî Restaurant</option>
                            <option value="mart">üõí Grocery/Mart</option>
                            <option value="laundry">üëî Laundry</option>
                            <option value="market">üõí Market</option>
                        </select>
                        <!-- Custom Arrow Icon -->
                        <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                            <svg class="w-4 h-4 text-snoonu-black dark:text-white dark:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="bg-snoonu-lightRed text-snoonu-red px-3 py-1 rounded-full text-xs font-bold">
                        <span id="editionLabel">RESTAURANT EDITION</span>
                    </div>
                </div>
                <div class="flex items-center space-4">
                    <button id="themeToggle" class="w-12 h-12 rounded-full bg-white/20 hover:bg-white/30 transition-all flex items-center justify-center">
                        <span id="sunIcon">‚òÄÔ∏è</span>
                        <span id="moonIcon" class="hidden">üåô</span>
                    </button>
                    <nav class="flex space-x-2 ml-4">
                        <button onclick="showTab('dashboard')" class="tab-btn px-4 py-3 rounded-xl text-sm font-bold transition-all bg-white text-snoonu-red">
                            üè† Dashboard
                        </button>
                        <button onclick="showTab('feedback')" class="tab-btn px-4 py-3 rounded-xl text-sm font-bold transition-all text-white hover:bg-white/20">
                            üí¨ Feedback
                        </button>
                        <button onclick="showTab('marketing')" class="tab-btn px-4 py-3 rounded-xl text-sm font-bold transition-all text-white hover:bg-white/20">
                            üöÄ Marketing
                        </button>
                        <button onclick="showTab('analytics')" class="tab-btn px-4 py-3 rounded-xl text-sm font-bold transition-all text-white hover:bg-white/20">
                            üìà Market Pulse
                        </button>
                    </nav>
                </div>
            </div>
            <!-- Ticker Message -->
            <div id="tickerMessage" class="bg-yellow-100 dark:bg-yellow-900/20 border-l-4 border-yellow-500 text-yellow-800 dark:text-yellow-200 px-4 py-2 text-sm font-medium">
                üì¢ Hungry customers nearby - surge in burger orders
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-8">

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Score Card -->
                    <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 relative overflow-hidden theme-transition">
                        <div class="absolute inset-0 bg-restaurant-pattern opacity-50"></div>
                        <div class="relative z-10">
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex items-center space-x-4">
                                    <div id="big-merchant-logo" class="text-4xl bg-snoonu-lightRed dark:bg-snoonu-dark-lightRed rounded-full p-3">üçî</div>
                                    <div>
                                        <h2 id="merchantName" class="text-2xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Burger House</h2>
                                        <p class="text-snoonu-gray dark:text-gray-400 capitalize flex items-center">
                                            <span id="merchantIcon" class="mr-2 dark:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]">üè™</span><span id="merchantCategory">restaurants</span>
                                        </p>
                                    </div>
                                </div>
                                <div class="px-4 py-2 rounded-full text-white text-sm font-semibold bg-snoonu-red">
                                    Bronze Tier
                                </div>
                            </div>

                            <div class="text-center mb-6">
                                <div class="text-6xl font-black text-snoonu-black dark:text-snoonu-dark-white mb-2">58</div>
                                <div class="text-snoonu-gray dark:text-gray-400 font-medium">Merchant Score</div>
                            </div>

                            <div class="text-center mb-6">
                                <button onclick="openSimulator()" class="bg-snoonu-red hover:bg-snoonu-darkRed text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
                                    üéØ What If I Improve?
                                </button>
                            </div>

                            <div id="metricsContainer" class="grid grid-cols-2 lg:grid-cols-5 gap-3 mt-6">
                                <!-- Metrics will be dynamically rendered here -->
                            </div>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition">
                        <div class="flex items-center mb-6">
                            <div class="text-2xl mr-3">üöÄ</div>
                            <div>
                                <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Autopilot Actions</h3>
                                <p class="text-snoonu-gray dark:text-gray-400 text-sm">One-click fixes to boost your score</p>
                            </div>
                        </div>

                            <div class="space-y-4">
                            <div class="border-2 border-snoonu-lightGray dark:border-snoonu-dark-lightGray rounded-xl p-5 hover:border-snoonu-red dark:hover:border-snoonu-dark-red transition-all duration-200">
                                <h4 id="aiActionTitle" class="font-bold text-snoonu-black dark:text-snoonu-dark-white text-lg mb-2">üöÄ Update burger prep time to 25 min during lunch rush</h4>
                                <p id="aiActionDesc" class="text-snoonu-gray dark:text-gray-400 mb-3">Our signature burgers need more prep time during peak lunch hours</p>
                                <div class="flex items-center space-x-6 text-sm">
                                    <div class="flex items-center text-snoonu-gray dark:text-gray-400">
                                        <span class="mr-2">‚è±Ô∏è</span>
                                        <span class="font-medium">3 min</span>
                                    </div>
                                    <div class="flex items-center text-snoonu-red dark:text-snoonu-dark-red font-semibold">
                                        <span class="mr-2">üéØ</span>
                                        <span>+8 points</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div>
                    <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition">
                        <div class="flex items-center mb-6">
                            <div class="text-2xl mr-3">üéÅ</div>
                            <div>
                                <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Your Rewards</h3>
                                <p class="text-snoonu-gray dark:text-gray-400 text-sm">Earn more with better performance</p>
                            </div>
                        </div>

                        <!-- Tier Progress Section -->
                        <div id="tierProgressSection">
                            <!-- Progress Header and Bar will be inserted here by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feedback Tab -->
        <div id="feedback" class="tab-content">
            <!-- AI Sentiment Dashboard -->
            <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition mb-6">
                <div class="flex items-center mb-6">
                    <div class="text-2xl mr-3">üìä</div>
                    <div>
                        <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">AI Sentiment Analysis</h3>
                        <p class="text-snoonu-gray dark:text-gray-400 text-sm">Real-time customer voice intelligence</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Net Sentiment Score -->
                    <div class="text-center">
                        <div class="text-4xl font-black text-snoonu-black dark:text-white mb-2" id="sentimentScore">4.2</div>
                        <div class="text-sm text-snoonu-gray dark:text-gray-400">Net Sentiment Score</div>
                        <div class="flex items-center justify-center mt-1">
                            <span class="text-yellow-500 text-lg">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                        </div>
                    </div>

                    <!-- Trend Indicator -->
                    <div class="text-center">
                        <div class="flex items-center justify-center mb-2">
                            <span id="trendArrow" class="text-2xl mr-2">‚Üò</span>
                            <span id="trendValue" class="text-xl font-bold text-red-500">0.3 pts</span>
                        </div>
                        <div class="text-sm text-snoonu-gray dark:text-gray-400">vs yesterday</div>
                    </div>

                    <!-- AI Insight -->
                    <div class="md:col-span-1">
                        <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4">
                            <div class="text-sm font-bold text-blue-900 dark:text-blue-200 mb-1">ü§ñ AI Insight</div>
                            <div class="text-sm text-blue-800 dark:text-blue-300" id="aiInsight">‚ö†Ô∏è 3 recent complaints detected regarding 'Packaging' - suggested check on thermal bags.</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live Customer Voice Feed -->
            <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition">
                <div class="flex items-center mb-6">
                    <div class="text-2xl mr-3">üí¨</div>
                    <div>
                        <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Live Customer Voice Feed</h3>
                        <p class="text-snoonu-gray dark:text-gray-400 text-sm">Real-time reviews with actionable insights</p>
                    </div>
                </div>

                <!-- Actionable Clusters Container -->
                <div id="feedbackContainer">
                    <!-- Reviews will be dynamically rendered here -->
                </div>
            </div>
        </div>

        <!-- Marketing Tab -->
        <div id="marketing" class="tab-content">
            <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition">
                <div class="flex items-center mb-6">
                    <div class="text-2xl mr-3">üöÄ</div>
                    <div>
                        <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Marketing & Growth Hub</h3>
                        <p class="text-snoonu-gray dark:text-gray-400 text-sm">AI-powered strategies to boost your revenue</p>
                    </div>
                </div>

                <!-- Marketing Grid Layout -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

                    <!-- AI Opportunity Feed (Left - 2 columns) -->
                    <div class="lg:col-span-2">
                        <div class="mb-6">
                            <h4 class="text-lg font-bold text-snoonu-black dark:text-snoonu-dark-white mb-2">Recommended Promotions</h4>
                            <p class="text-snoonu-gray dark:text-gray-400 text-sm mb-4">AI-curated offers to boost your sales right now.</p>
                        </div>

                        <!-- Opportunity Cards -->
                        <div class="space-y-4">
                            <!-- Weather Event Card -->
                            <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-blue-900/50 dark:shadow-[0_0_10px_rgba(59,130,246,0.3)] rounded-xl p-5 theme-transition">
                                <div class="flex items-start justify-between mb-3">
                                    <div class="flex items-center">
                                        <span class="text-3xl mr-3">üåßÔ∏è</span>
                                        <div>
                                            <h5 class="font-bold text-snoonu-black dark:text-white">Rainy Day Comfort</h5>
                                            <p class="text-sm text-snoonu-gray dark:text-gray-400">Demand for soups is up 40%</p>
                                        </div>
                                    </div>
                                    <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300 text-xs font-bold rounded-full">Weather Event</span>
                                </div>
                                <p class="text-sm text-snoonu-gray dark:text-gray-400 mb-4">Launch 10% Off comfort foods to capitalize on the weather?</p>
                                <button class="bg-snoonu-red hover:bg-snoonu-darkRed text-white px-4 py-2 rounded-lg font-bold text-sm shadow hover:shadow-md transition-all duration-200">
                                    Enable for 3h
                                </button>
                            </div>

                            <!-- Inventory Card -->
                            <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-orange-900/50 dark:shadow-[0_0_10px_rgba(249,115,22,0.3)] rounded-xl p-5 theme-transition">
                                <div class="flex items-start justify-between mb-3">
                                    <div class="flex items-center">
                                        <span class="text-3xl mr-3">üì¶</span>
                                        <div>
                                            <h5 class="font-bold text-snoonu-black dark:text-white">Clear Stock</h5>
                                            <p class="text-sm text-snoonu-gray dark:text-gray-400">Milk expiring in 2 days</p>
                                        </div>
                                    </div>
                                    <span class="px-3 py-1 bg-orange-100 dark:bg-orange-900/50 text-orange-800 dark:text-orange-300 text-xs font-bold rounded-full">Inventory</span>
                                </div>
                                <p class="text-sm text-snoonu-gray dark:text-gray-400 mb-4">Run BOGO offer to prevent waste and boost sales?</p>
                                <button class="bg-snoonu-red hover:bg-snoonu-darkRed text-white px-4 py-2 rounded-lg font-bold text-sm shadow hover:shadow-md transition-all duration-200">
                                    Launch BOGO
                                </button>
                            </div>

                            <!-- Event Card -->
                            <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_10px_rgba(220,38,38,0.3)] rounded-xl p-5 theme-transition">
                                <div class="flex items-start justify-between mb-3">
                                    <div class="flex items-center">
                                        <span class="text-3xl mr-3">‚öΩ</span>
                                        <div>
                                            <h5 class="font-bold text-snoonu-black dark:text-white">Match Day Special</h5>
                                            <p class="text-sm text-snoonu-gray dark:text-gray-400">Qatar vs. KSA tonight</p>
                                        </div>
                                    </div>
                                    <span class="px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 text-xs font-bold rounded-full">Event</span>
                                </div>
                                <p class="text-sm text-snoonu-gray dark:text-gray-400 mb-4">Target football fans with game-day promotions.</p>
                                <button class="bg-snoonu-red hover:bg-snoonu-darkRed text-white px-4 py-2 rounded-lg font-bold text-sm shadow hover:shadow-md transition-all duration-200">
                                    Boost Visibility
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ROI Tracker (Right - 1 column) -->
                    <div>
                        <div class="mb-6">
                            <h4 class="text-lg font-bold text-snoonu-black dark:text-snoonu-dark-white mb-2">Performance Snapshot</h4>
                            <p class="text-snoonu-gray dark:text-gray-400 text-sm">See how marketing drives real results.</p>
                        </div>

                        <!-- ROI Metrics -->
                        <div class="space-y-6">
                            <!-- ROAS -->
                            <div class="text-center">
                                <div class="relative w-24 h-24 mx-auto mb-3">
                                    <svg class="w-24 h-24 transform -rotate-90" viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" class="text-gray-200 dark:text-gray-700"></circle>
                                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="62.8" stroke-dashoffset="15.7" class="text-green-500" stroke-linecap="round"></circle>
                                    </svg>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <span class="text-2xl font-black text-green-600 dark:text-green-400">4.2x</span>
                                    </div>
                                </div>
                                <div class="text-sm font-medium text-snoonu-gray dark:text-gray-400">Return on Ad Spend</div>
                            </div>

                            <!-- Revenue -->
                            <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-green-900/50 rounded-xl p-4 text-center">
                                <div class="text-2xl font-black text-green-600 dark:text-green-400 mb-1">1,250 QAR</div>
                                <div class="text-sm font-medium text-snoonu-gray dark:text-gray-400">Ad Revenue</div>
                            </div>

                            <!-- New Customers -->
                            <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-blue-900/50 rounded-xl p-4 text-center">
                                <div class="text-2xl font-black text-blue-600 dark:text-blue-400 mb-1">+45</div>
                                <div class="text-sm font-medium text-snoonu-gray dark:text-gray-400">New Customers</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Active Campaigns (Bottom - Full Width) -->
                <div class="mt-8">
                    <h4 class="text-lg font-bold text-snoonu-black dark:text-snoonu-dark-white mb-4">Active Campaigns</h4>
                    <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 rounded-xl overflow-hidden">
                        <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                            <div class="flex justify-between items-center">
                                <span class="font-medium text-snoonu-black dark:text-white">Free Delivery Friday</span>
                                <span class="px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 text-xs font-bold rounded-full">Active</span>
                            </div>
                        </div>
                        <div class="p-4">
                            <div class="flex justify-between items-center">
                                <span class="font-medium text-snoonu-gray dark:text-gray-400">Lunch Rush 20%</span>
                                <span class="px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 text-xs font-bold rounded-full">Ended</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Snoonu Stars Collaboration -->
                <div class="mt-12">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h4 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white mb-1">üá∂üá¶ Snoonu Stars Collaboration</h4>
                            <p class="text-snoonu-gray dark:text-gray-400 text-sm">Promote your brand with Qatar's top voices. Exclusive to Snoonu merchants.</p>
                        </div>
                        <div class="px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 text-xs font-bold rounded-full">
                            ‚ù§Ô∏è Supported by Qatar's Creative Community
                        </div>
                    </div>

                    <!-- Celebrity Cards Container -->
                    <div id="celebrityContainer" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- Celebrity cards will be dynamically rendered here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="analytics" class="tab-content">
            <!-- Competitor Intel Ticker -->
            <div class="mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-3 overflow-hidden">
                <div class="flex items-center">
                    <span class="text-red-600 dark:text-red-400 mr-2">‚ö†Ô∏è</span>
                    <div class="flex-1 overflow-hidden">
                        <div class="animate-marquee whitespace-nowrap text-sm text-red-800 dark:text-red-200">
                            Competitor 'Burger King' just lowered delivery fees to 0 QAR ‚Ä¢ New restaurant 'Pizza Palace' opened in West Bay ‚Ä¢ Local demand for healthy options up 25% this week ‚Ä¢ Weekend surge expected due to Qatar Cup final
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live Zone Activity -->
            <div class="mb-6">
                <div class="flex items-center mb-6">
                    <div class="text-2xl mr-3">üìç</div>
                    <div class="flex items-center">
                        <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white mr-3">Live Zone Activity</h3>
                        <div class="flex items-center">
                            <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse mr-2"></div>
                            <span class="text-xs text-green-600 dark:text-green-400 font-medium">LIVE</span>
                        </div>
                    </div>
                </div>

                <!-- District Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">

                    <!-- West Bay Card -->
                    <div class="bg-[#0B0F19] border border-red-500/50 rounded-xl p-5 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 group">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="text-lg font-bold text-white">West Bay</h4>
                            <div class="px-2 py-1 bg-red-500/20 border border-red-500/50 rounded-full">
                                <span class="text-xs font-bold text-red-400 animate-pulse">üî• SURGE ACTIVE</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-400">Orders/hr:</span>
                                <span class="text-lg font-bold text-white">142 <span class="text-green-400 text-sm">‚Üó 40%</span></span>
                            </div>
                            <div class="text-xs text-gray-500 bg-red-500/10 border border-red-500/20 rounded px-2 py-1">
                                Office lunch rush detected
                            </div>
                        </div>
                    </div>

                    <!-- The Pearl Card -->
                    <div class="bg-[#0B0F19] border border-blue-500/50 rounded-xl p-5 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 group">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="text-lg font-bold text-white">The Pearl</h4>
                            <div class="px-2 py-1 bg-blue-500/20 border border-blue-500/50 rounded-full">
                                <span class="text-xs font-bold text-blue-400">üåä HIGH TRAFFIC</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-400">Orders/hr:</span>
                                <span class="text-lg font-bold text-white">89 <span class="text-gray-400 text-sm">‚Üí Stable</span></span>
                            </div>
                            <div class="text-xs text-gray-500 bg-blue-500/10 border border-blue-500/20 rounded px-2 py-1">
                                Dinner pre-orders rising
                            </div>
                        </div>
                    </div>

                    <!-- Lusail City Card -->
                    <div class="bg-[#0B0F19] border border-purple-500/50 rounded-xl p-5 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 group">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="text-lg font-bold text-white">Lusail City</h4>
                            <div class="px-2 py-1 bg-purple-500/20 border border-purple-500/50 rounded-full">
                                <span class="text-xs font-bold text-purple-400">üöÄ GROWING</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-400">Orders/hr:</span>
                                <span class="text-lg font-bold text-white">56 <span class="text-green-400 text-sm">‚Üó 15%</span></span>
                            </div>
                            <div class="text-xs text-gray-500 bg-purple-500/10 border border-purple-500/20 rounded px-2 py-1">
                                New residential development
                            </div>
                        </div>
                    </div>

                    <!-- Al Rayyan Card -->
                    <div class="bg-[#0B0F19] border border-green-500/50 rounded-xl p-5 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 group">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="text-lg font-bold text-white">Al Rayyan</h4>
                            <div class="px-2 py-1 bg-green-500/20 border border-green-500/50 rounded-full">
                                <span class="text-xs font-bold text-green-400">‚úÖ STABLE</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-400">Orders/hr:</span>
                                <span class="text-lg font-bold text-white">34 <span class="text-gray-400 text-sm">‚Üí Steady</span></span>
                            </div>
                            <div class="text-xs text-gray-500 bg-green-500/10 border border-green-500/20 rounded px-2 py-1">
                                Consistent local demand
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Live Market Map -->
            <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition mb-6">
                <div class="flex items-center mb-6">
                    <div class="text-2xl mr-3">üó∫Ô∏è</div>
                    <div>
                        <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Live Market Map</h3>
                        <p class="text-snoonu-gray dark:text-gray-400 text-sm">Real-time demand hotspots across Doha</p>
                    </div>
                </div>

                <!-- Market Trends & Action Plan -->
                <div class="mb-8">

                    <!-- Part 1: Market Mood Header -->
                    <div class="bg-[#0B0F19] border border-white/10 rounded-xl p-6 mb-6 shadow-xl">
                        <div class="flex items-center mb-4">
                            <div class="text-2xl mr-3">üéØ</div>
                            <div class="flex items-center">
                                <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white mr-3">Market Mood</h3>
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse mr-2"></div>
                                    <span class="text-xs text-green-600 dark:text-green-400 font-medium">LIVE</span>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="flex items-center space-x-3">
                                <div class="text-3xl">üî•</div>
                                <div>
                                    <div class="text-sm text-gray-400">Dominant Craving</div>
                                    <div class="text-lg font-bold text-white">Spicy Food</div>
                                    <div class="text-sm text-green-400 font-medium">‚Üó 45% vs yesterday</div>
                                </div>
                            </div>

                            <div class="flex items-center space-x-3">
                                <div class="text-3xl">üí∏</div>
                                <div>
                                    <div class="text-sm text-gray-400">Price Sensitivity</div>
                                    <div class="text-lg font-bold text-white">High</div>
                                    <div class="text-sm text-red-400 font-medium">Customers seeking deals</div>
                                </div>
                            </div>

                            <div class="flex items-center space-x-3">
                                <div class="text-3xl">üéÆ</div>
                                <div>
                                    <div class="text-sm text-gray-400">Active Demographic</div>
                                    <div class="text-lg font-bold text-white">Gamers & Students</div>
                                    <div class="text-sm text-green-400 font-medium">Late night surge</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Part 2: Trend Battle -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">

                        <!-- Rising Trends -->
                        <div class="bg-[#0B0F19] border border-white/10 rounded-xl p-6 shadow-xl">
                            <div class="flex items-center mb-4">
                                <div class="text-xl mr-2">üöÄ</div>
                                <h4 class="text-lg font-bold text-white">Rising</h4>
                            </div>

                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-white font-medium">Chicken Wraps</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-16 h-2 bg-white/20 rounded-full">
                                            <div class="h-full bg-green-500 rounded-full" style="width: 22%"></div>
                                        </div>
                                        <span class="text-green-400 text-sm font-bold">+22%</span>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between">
                                    <span class="text-white font-medium">Iced Coffee</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-16 h-2 bg-white/20 rounded-full">
                                            <div class="h-full bg-green-500 rounded-full" style="width: 15%"></div>
                                        </div>
                                        <span class="text-green-400 text-sm font-bold">+15%</span>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between">
                                    <span class="text-white font-medium">Family Bundles</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-16 h-2 bg-white/20 rounded-full">
                                            <div class="h-full bg-green-500 rounded-full" style="width: 8%"></div>
                                        </div>
                                        <span class="text-green-400 text-sm font-bold">+8%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Falling Trends -->
                        <div class="bg-[#0B0F19] border border-white/10 rounded-xl p-6 shadow-xl">
                            <div class="flex items-center mb-4">
                                <div class="text-xl mr-2">üìâ</div>
                                <h4 class="text-lg font-bold text-white">Falling</h4>
                            </div>

                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-white font-medium">Hot Soup</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-16 h-2 bg-white/20 rounded-full">
                                            <div class="h-full bg-red-500 rounded-full" style="width: 12%"></div>
                                        </div>
                                        <span class="text-red-400 text-sm font-bold">-12%</span>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between">
                                    <span class="text-white font-medium">Salads</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-16 h-2 bg-white/20 rounded-full">
                                            <div class="h-full bg-red-500 rounded-full" style="width: 5%"></div>
                                        </div>
                                        <span class="text-red-400 text-sm font-bold">-5%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- Part 3: Strategic Action Cards -->
                    <div class="mb-6">
                        <div class="flex items-center mb-4">
                            <div class="text-2xl mr-3">‚ö°</div>
                            <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Recommended Actions</h3>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">

                            <!-- Action 1: Spicy Add-on -->
                            <div class="bg-[#0B0F19] border border-red-500/30 rounded-xl p-5 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 group">
                                <div class="flex items-center justify-between mb-3">
                                    <h5 class="text-lg font-bold text-white">Launch 'Firecracker' Add-on</h5>
                                    <div class="w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center">
                                        <span class="text-red-400 text-sm">üî•</span>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-400 mb-4">Spicy searches are up. Add a 'Spicy Sauce' option to your burgers for +2 QAR.</p>
                                <button class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                                    Enable One-Click
                                </button>
                            </div>

                            <!-- Action 2: Duo Combo -->
                            <div class="bg-[#0B0F19] border border-green-500/30 rounded-xl p-5 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 group">
                                <div class="flex items-center justify-between mb-3">
                                    <h5 class="text-lg font-bold text-white">Activate 'Duo Combo'</h5>
                                    <div class="w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center">
                                        <span class="text-green-400 text-sm">üí∞</span>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-400 mb-4">Customers are skipping single items. Bundle 2 burgers + fries to increase conversion.</p>
                                <button class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                                    Create Bundle
                                </button>
                            </div>

                            <!-- Action 3: Extend Hours -->
                            <div class="bg-[#0B0F19] border border-blue-500/30 rounded-xl p-5 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 group">
                                <div class="flex items-center justify-between mb-3">
                                    <h5 class="text-lg font-bold text-white">Extend Hours to 2 AM</h5>
                                    <div class="w-8 h-8 bg-blue-500/20 rounded-full flex items-center justify-center">
                                        <span class="text-blue-400 text-sm">‚è∞</span>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-400 mb-4">Late night demand is peaking. Stay open 1 extra hour to capture 50+ orders.</p>
                                <button class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                                    Update Hours
                                </button>
                            </div>

                        </div>
                    </div>

                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">

                <div class="bg-[#0B0F19] border border-white/10 rounded-xl p-6 shadow-xl">
                    <div class="flex justify-between items-center mb-4">
                        <div>
                            <h3 class="text-lg font-bold text-white">Sales Velocity</h3>
                            <p class="text-xs text-gray-400">Revenue growth over last 7 days</p>
                        </div>
                        <div class="text-green-500 font-mono font-bold">+12.4% ‚Üó</div>
                    </div>
                    <div class="relative h-64 w-full">
                        <canvas id="salesChart"></canvas>
                    </div>
                </div>

                <div class="bg-[#0B0F19] border border-white/10 rounded-xl p-6 shadow-xl">
                    <div class="flex justify-between items-center mb-4">
                        <div>
                            <h3 class="text-lg font-bold text-white">Product Performance</h3>
                            <p class="text-xs text-gray-400">Top selling items by volume</p>
                        </div>
                        <button class="text-xs bg-white/5 hover:bg-white/10 text-white px-3 py-1 rounded transition">View Report</button>
                    </div>
                    <div class="relative h-64 w-full">
                        <canvas id="productsChart"></canvas>
                    </div>
                </div>

            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <!-- Product Trend Battle -->
                <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition">
                    <div class="flex items-center mb-6">
                        <div class="text-2xl mr-3">‚öîÔ∏è</div>
                        <div>
                            <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Product Trend Battle</h3>
                            <p class="text-snoonu-gray dark:text-gray-400 text-sm">Your items vs. market leaders</p>
                        </div>
                    </div>

                    <!-- Battle Chart -->
                    <div class="space-y-4">
                        <!-- Your Item -->
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center">
                                <span class="text-lg mr-2">üè†</span>
                                <div>
                                    <div class="text-sm font-bold text-snoonu-black dark:text-white">Spicy Wrap</div>
                                    <div class="text-xs text-snoonu-gray dark:text-gray-400">Your Item</div>
                                </div>
                            </div>
                            <span class="text-sm font-bold text-snoonu-black dark:text-white">45 orders</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
                            <div class="bg-snoonu-red h-3 rounded-full transition-all duration-1000" style="width: 27%"></div>
                        </div>

                        <!-- Market Leader -->
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center">
                                <span class="text-lg mr-2">üëë</span>
                                <div>
                                    <div class="text-sm font-bold text-snoonu-black dark:text-white">Dynamite Shrimp</div>
                                    <div class="text-xs text-snoonu-gray dark:text-gray-400">Market Leader</div>
                                </div>
                            </div>
                            <span class="text-sm font-bold text-snoonu-black dark:text-white">120 orders</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
                            <div class="bg-yellow-500 h-3 rounded-full transition-all duration-1000" style="width: 73%"></div>
                        </div>
                    </div>

                    <!-- Insight Tip -->
                    <div class="mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg">
                        <div class="flex items-start">
                            <span class="text-blue-600 dark:text-blue-400 mr-2">üí°</span>
                            <div class="text-sm text-blue-800 dark:text-blue-200">
                                <strong>Market Insight:</strong> Top performers bundle drinks with meals. Consider adding a "Wrap + Drink" combo at 25 QAR discount to compete!
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Prediction Engine -->
                <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition relative">
                    <div class="flex items-center mb-6">
                        <div class="text-2xl mr-3">ü§ñ</div>
                        <div>
                            <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">AI Prediction Engine</h3>
                            <p class="text-snoonu-gray dark:text-gray-400 text-sm">7-day demand forecast</p>
                        </div>
                    </div>

                    <!-- Tier Gate Overlay (for Bronze/Silver) -->
                    <div id="predictionLock" class="absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center rounded-xl opacity-0 pointer-events-none transition-all">
                        <div class="text-center">
                            <div class="text-4xl mb-4">üîí</div>
                            <div class="text-white text-lg font-bold mb-2">Unlock Gold to See Tomorrow's Demand</div>
                            <div class="text-white/80 text-sm">Get AI-powered forecasts and stay ahead of market trends</div>
                        </div>
                    </div>

                    <!-- Prediction Chart -->
                    <div id="predictionChart" class="space-y-4">
                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg">
                            <div class="flex items-center">
                                <span class="text-lg mr-2">üåßÔ∏è</span>
                                <div>
                                    <div class="text-sm font-bold text-snoonu-black dark:text-white">Tomorrow</div>
                                    <div class="text-xs text-snoonu-gray dark:text-gray-400">Rain expected</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-lg font-bold text-green-600 dark:text-green-400">+60%</div>
                                <div class="text-xs text-snoonu-gray dark:text-gray-400">Soup demand</div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg">
                            <div class="flex items-center">
                                <span class="text-lg mr-2">‚öΩ</span>
                                <div>
                                    <div class="text-sm font-bold text-snoonu-black dark:text-white">Friday</div>
                                    <div class="text-xs text-snoonu-gray dark:text-gray-400">Cup Final</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-lg font-bold text-red-600 dark:text-red-400">+85%</div>
                                <div class="text-xs text-snoonu-gray dark:text-gray-400">Pizza demand</div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg">
                            <div class="flex items-center">
                                <span class="text-lg mr-2">üèñÔ∏è</span>
                                <div>
                                    <div class="text-sm font-bold text-snoonu-black dark:text-white">Weekend</div>
                                    <div class="text-xs text-snoonu-gray dark:text-gray-400">Holiday surge</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-lg font-bold text-blue-600 dark:text-blue-400">+35%</div>
                                <div class="text-xs text-snoonu-gray dark:text-gray-400">Overall demand</div>
                            </div>
                        </div>

                        <!-- Auto-Prepare Button (Platinum only) -->
                        <div id="autoPrepareBtn" class="mt-6 opacity-0 pointer-events-none transition-all">
                            <button class="w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
                                ‚ö° Auto-Prepare Inventory
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    </div>

        <!-- ScoreLab Simulator Modal -->
        <div id="simulatorModal" class="fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 hidden flex items-center justify-center z-50 p-4">
            <div class="bg-white dark:bg-snoonu-dark-darkGray rounded-xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-hidden theme-transition">
                <div class="bg-snoonu-red dark:bg-snoonu-dark-red text-white p-6">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="text-2xl">üß™</div>
                            <div>
                                <h2 class="text-xl font-bold">ScoreLab Simulator</h2>
                                <p class="text-red-100 text-sm">AI-powered decision cockpit - Measure ‚Üí Plan ‚Üí Predict ‚Üí Act</p>
                            </div>
                        </div>
                        <button onclick="closeSimulator()" class="text-white hover:bg-red-700 dark:hover:bg-red-800 rounded-full p-2 transition-colors">‚úï</button>
                    </div>
                </div>

                <div class="p-6 overflow-y-auto max-h-[calc(95vh-200px)]">
                    <!-- AI Coach Section -->
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 mb-8 border border-blue-200 dark:border-blue-700">
                        <div class="flex items-center mb-4">
                            <div class="text-2xl mr-3">ü§ñ</div>
                            <div>
                                <h3 class="text-lg font-bold text-blue-900 dark:text-blue-200">AI Coach Analysis</h3>
                                <p class="text-blue-700 dark:text-blue-300 text-sm">Why your score is 58 and what to fix</p>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="bg-white dark:bg-blue-900/30 rounded-lg p-4 border-l-4 border-red-500">
                                <div class="font-semibold text-red-800 dark:text-red-300">Stockout Issues (-12 points)</div>
                                <div class="text-red-700 dark:text-red-400 text-sm mt-1">High "item unavailable" cancellations hurting reliability</div>
                            </div>
                            <div class="bg-white dark:bg-blue-900/30 rounded-lg p-4 border-l-4 border-orange-500">
                                <div class="font-semibold text-orange-800 dark:text-orange-300">Response Speed (-8 points)</div>
                                <div class="text-orange-700 dark:text-orange-400 text-sm mt-1">"Vendor not reachable" complaints increasing</div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Levers Section -->
                        <div>
                            <h3 class="text-lg font-bold text-snoonu-black dark:text-snoonu-dark-white mb-4">üéõÔ∏è Business Levers</h3>
                            <div class="space-y-4">
                                <div class="bg-snoonu-lightRed dark:bg-snoonu-dark-lightRed rounded-xl p-4 border border-snoonu-red/20 dark:border-snoonu-dark-red/20">
                                    <div class="flex items-center justify-between mb-2">
                                        <label class="font-medium text-snoonu-black dark:text-snoonu-dark-white"><span id="timeMetricIcon" class="dark:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]">‚è±Ô∏è</span> <span id="timeMetricLabel">Prep Time</span></label>
                                        <span class="text-snoonu-red dark:text-snoonu-dark-red font-bold" id="prepTimeValue">25 min</span>
                                    </div>
                                    <input type="range" id="prepTimeSlider" min="5" max="45" value="25" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-snoonu-red" oninput="updateSimulation()" />
                                    <div class="flex justify-between text-xs text-snoonu-gray dark:text-gray-400 mt-1">
                                        <span>5 min (Fast)</span>
                                        <span>45 min (Reliable)</span>
                                    </div>
                                </div>

                                <div class="bg-snoonu-lightRed dark:bg-snoonu-dark-lightRed rounded-xl p-4 border border-snoonu-red/20 dark:border-snoonu-dark-red/20">
                                    <div class="flex items-center justify-between mb-2">
                                        <label class="font-medium text-snoonu-black dark:text-snoonu-dark-white"><span id="stockoutMetricIcon" class="dark:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]">üì¶</span> <span id="stockoutMetricLabel">Stockout Rate</span></label>
                                        <span class="text-snoonu-red dark:text-snoonu-dark-red font-bold" id="stockoutValue">15%</span>
                                    </div>
                                    <input type="range" id="stockoutSlider" min="0" max="40" value="15" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-snoonu-red" oninput="updateSimulation()" />
                                    <div class="flex justify-between text-xs text-snoonu-gray dark:text-gray-400 mt-1">
                                        <span>0% (Perfect)</span>
                                        <span>40% (Problematic)</span>
                                    </div>
                                </div>

                                <div class="bg-snoonu-lightRed dark:bg-snoonu-dark-lightRed rounded-xl p-4 border border-snoonu-red/20 dark:border-snoonu-dark-red/20">
                                    <div class="flex items-center justify-between mb-2">
                                        <label class="font-medium text-snoonu-black dark:text-snoonu-dark-white"><span id="responseMetricIcon" class="dark:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]">üí¨</span> <span id="responseMetricLabel">Response Time</span></label>
                                        <span class="text-snoonu-red dark:text-snoonu-dark-red font-bold" id="responseValue">8 min</span>
                                    </div>
                                    <input type="range" id="responseSlider" min="1" max="30" value="8" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-snoonu-red" oninput="updateSimulation()" />
                                    <div class="flex justify-between text-xs text-snoonu-gray dark:text-gray-400 mt-1">
                                        <span>1 min (Instant)</span>
                                        <span>30 min (Slow)</span>
                                    </div>
                                </div>

                                <div class="bg-snoonu-lightRed dark:bg-snoonu-dark-lightRed rounded-xl p-4 border border-snoonu-red/20 dark:border-snoonu-dark-red/20">
                                    <div class="flex items-center justify-between mb-2">
                                        <label class="font-medium text-snoonu-black dark:text-snoonu-dark-white"><span id="ratingMetricIcon" class="dark:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]">‚≠ê</span> <span id="ratingMetricLabel">Customer Rating</span></label>
                                        <span class="text-snoonu-red dark:text-snoonu-dark-red font-bold" id="ratingValue">3.8/5</span>
                                    </div>
                                    <input type="range" id="ratingSlider" min="1" max="5" step="0.1" value="3.8" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-snoonu-red" oninput="updateSimulation()" />
                                    <div class="flex justify-between text-xs text-snoonu-gray dark:text-gray-400 mt-1">
                                        <span>1.0 (Poor)</span>
                                        <span>5.0 (Excellent)</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Results Section -->
                        <div>
                            <h3 class="text-lg font-bold text-snoonu-black dark:text-snoonu-dark-white mb-4">üìä Predicted Outcomes</h3>
                            <div class="space-y-4">
                                <div class="bg-gradient-to-r from-snoonu-red to-red-600 dark:from-snoonu-dark-red dark:to-red-700 text-white rounded-xl p-6">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <div class="text-3xl font-black" id="predictedScore">72</div>
                                            <div class="text-red-100 dark:text-red-200">Merchant Score</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-2xl font-bold text-green-300" id="scoreChange">+14 points</div>
                                            <div class="text-red-200 dark:text-red-300 text-sm">vs current 58</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-gradient-to-r from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 text-white rounded-xl p-6">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <div class="text-3xl font-black" id="salesGrowth">+18%</div>
                                            <div class="text-green-100 dark:text-green-200">Sales Growth</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-2xl font-bold text-green-200" id="profitIncrease">+$240/day</div>
                                            <div class="text-green-200 dark:text-green-300 text-sm">est. profit</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-gradient-to-r from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700 text-white rounded-xl p-6">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <div class="text-3xl font-black" id="tierChange">Silver</div>
                                            <div class="text-purple-100 dark:text-purple-200">New Tier</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-2xl font-bold text-yellow-300" id="tierBenefits">+Ad Credits</div>
                                            <div class="text-purple-200 dark:text-purple-300 text-sm">unlocked</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Generate Strategy Button -->
                    <div class="mt-8 text-center">
                        <button onclick="generateStrategies()" id="generateBtn" class="bg-gradient-to-r from-snoonu-red to-red-600 dark:from-snoonu-dark-red dark:to-red-700 hover:from-red-600 hover:to-red-700 dark:hover:from-red-700 dark:hover:to-red-800 text-white font-bold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 animate-pulse">
                            ü§ñ Generate Execution Strategy
                        </button>
                    </div>

                    <!-- AI Recommended Plans (Initially Hidden) -->
                    <div id="plansContainer" class="mt-8 hidden">
                        <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white mb-6">üéØ AI-Generated Execution Strategies</h3>
                        <div id="plansGrid" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-6 border-2 border-green-200 dark:border-green-700 hover:border-green-400 dark:hover:border-green-500 transition-colors cursor-pointer plan-card" data-plan="profit" onclick="selectPlan('profit')">
                                <div class="text-center mb-4">
                                    <div class="text-3xl mb-2">üí∞</div>
                                    <h4 class="font-bold text-green-800 dark:text-green-300">Max Profit</h4>
                                    <p class="text-green-600 dark:text-green-400 text-sm">Optimize for money</p>
                                </div>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-green-700 dark:text-green-400">Score:</span>
                                        <span class="font-bold text-green-800 dark:text-green-300">68 (+10)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-green-700 dark:text-green-400">Profit:</span>
                                        <span class="font-bold text-green-800 dark:text-green-300">+$180/day</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-green-700 dark:text-green-400">Effort:</span>
                                        <span class="font-bold text-green-800 dark:text-green-300">2 hours</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 border-2 border-blue-200 dark:border-blue-700 hover:border-blue-400 dark:hover:border-blue-500 transition-colors cursor-pointer plan-card" data-plan="score" onclick="selectPlan('score')">
                                <div class="text-center mb-4">
                                    <div class="text-3xl mb-2">‚≠ê</div>
                                    <h4 class="font-bold text-blue-800 dark:text-blue-300">Max Score</h4>
                                    <p class="text-blue-600 dark:text-blue-400 text-sm">Optimize for ranking</p>
                                </div>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-blue-700 dark:text-blue-400">Score:</span>
                                        <span class="font-bold text-blue-800 dark:text-blue-300">78 (+20)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-blue-700 dark:text-blue-400">Profit:</span>
                                        <span class="font-bold text-blue-800 dark:text-blue-300">+$120/day</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-blue-700 dark:text-blue-400">Effort:</span>
                                        <span class="font-bold text-blue-800 dark:text-blue-300">4 hours</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border-2 border-purple-200 dark:border-purple-700 hover:border-purple-400 dark:hover:border-purple-500 transition-colors cursor-pointer plan-card" data-plan="balanced" onclick="selectPlan('balanced')">
                                <div class="text-center mb-4">
                                    <div class="text-3xl mb-2">‚öñÔ∏è</div>
                                    <h4 class="font-bold text-purple-800 dark:text-purple-300">Balanced</h4>
                                    <p class="text-purple-600 dark:text-purple-400 text-sm">Best of both worlds</p>
                                </div>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-purple-700 dark:text-purple-400">Score:</span>
                                        <span class="font-bold text-purple-800 dark:text-purple-300">72 (+14)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-purple-700 dark:text-purple-400">Profit:</span>
                                        <span class="font-bold text-purple-800 dark:text-purple-300">+$160/day</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-purple-700 dark:text-purple-400">Effort:</span>
                                        <span class="font-bold text-purple-800 dark:text-purple-300">3 hours</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 flex justify-center">
                            <button onclick="applySelectedPlan()" id="applyPlanBtn" class="bg-snoonu-red dark:bg-snoonu-dark-red hover:bg-snoonu-darkRed dark:hover:bg-snoonu-dark-darkRed text-white font-bold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                üöÄ Apply Selected Strategy
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <script>
        // Tier Data Structure
        const tierData = {
            bronze: {
                name: "Bronze",
                minScore: 0,
                maxScore: 60,
                color: "bronze",
                benefits: ["Standard Commission", "Basic Support"],
                badge: "ü•â"
            },
            silver: {
                name: "Silver",
                minScore: 60,
                maxScore: 80,
                color: "silver",
                benefits: ["Priority Support", "2x Monthly Ad Credits", "Silver Badge"],
                badge: "ü•à"
            },
            gold: {
                name: "Gold",
                minScore: 80,
                maxScore: 95,
                color: "gold",
                benefits: ["Lower Commission (-2%)", "Dedicated Account Manager", "Gold Badge", "‚úÖ Access to Snoonu Stars (Paid Collaboration)"],
                badge: "ü•á"
            },
            platinum: {
                name: "Platinum",
                minScore: 95,
                maxScore: 100,
                color: "platinum",
                benefits: ["0% Commission on Pickups", "VIP Support Line", "Platinum Badge", "üíé Free Celebrity Ads"],
                badge: "üíé"
            }
        };

        // Snoonu Stars Celebrity Data
        const celebrityData = [
            {
                name: "Noor The Foodie",
                reach: "15k Locals",
                niche: "Hidden Gems",
                cost: "500 QAR",
                avatar: "üë©‚Äçüç≥",
                description: "Local food blogger discovering Qatar's best kept secrets"
            },
            {
                name: "Ahmed Al-Mulla",
                reach: "85k Followers",
                niche: "TV Presenter",
                cost: "1,500 QAR",
                avatar: "üë®‚Äçüíº",
                description: "Rising TV personality and Qatar's entertainment voice"
            },
            {
                name: "Khalid (The Singer)",
                reach: "1.2M Qataris",
                niche: "National Icon",
                cost: "Contact Agent",
                avatar: "üé§",
                description: "Qatar's beloved singer and national pride ambassador"
            }
        ];

        // Customer Feedback Data Engine
        const feedbackData = {
            restaurant: {
                sentiment: {
                    score: 4.2,
                    trend: "down",
                    trendValue: 0.3,
                    insight: "‚ö†Ô∏è 3 recent complaints detected regarding 'Packaging' - suggested check on thermal bags."
                },
                reviews: [
                    { name: "Ahmed K.", rating: 5, comment: "Amazing burgers! Fresh and juicy, definitely coming back!", tag: "Quality", time: "2h ago", sentiment: "positive" },
                    { name: "Fatima R.", rating: 1, comment: "Food arrived cold and fries were soggy. Terrible experience.", tag: "Packaging", time: "4h ago", sentiment: "negative" },
                    { name: "Mohammed S.", rating: 4, comment: "Good food but delivery took 45 minutes. Please improve speed.", tag: "Late", time: "6h ago", sentiment: "neutral" },
                    { name: "Sara A.", rating: 5, comment: "Best burger in the area! Staff was friendly too.", tag: "Service", time: "8h ago", sentiment: "positive" },
                    { name: "Omar B.", rating: 2, comment: "Burger was okay but missing the special sauce I ordered.", tag: "Missing Item", time: "12h ago", sentiment: "negative" },
                    { name: "Layla M.", rating: 5, comment: "Perfect! Exactly what I ordered, hot and fresh.", tag: "Quality", time: "1d ago", sentiment: "positive" },
                    { name: "Khalid H.", rating: 3, comment: "Food was good but packaging leaked all over my car.", tag: "Packaging", time: "1d ago", sentiment: "negative" }
                ]
            },
            mart: {
                sentiment: {
                    score: 4.5,
                    trend: "up",
                    trendValue: 0.2,
                    insight: "üìà Customer satisfaction improving - 'Fresh Produce' category driving positive reviews."
                },
                reviews: [
                    { name: "Nadia L.", rating: 5, comment: "Fresh fruits and vegetables! Love the quality here.", tag: "Quality", time: "1h ago", sentiment: "positive" },
                    { name: "Ibrahim T.", rating: 1, comment: "Milk carton leaked in the bag, made a mess everywhere.", tag: "Packaging", time: "3h ago", sentiment: "negative" },
                    { name: "Aisha R.", rating: 4, comment: "Good selection but couldn't find the brand I wanted.", tag: "Missing Item", time: "5h ago", sentiment: "neutral" },
                    { name: "Youssef M.", rating: 5, comment: "Always fresh dairy products. Very reliable!", tag: "Quality", time: "7h ago", sentiment: "positive" },
                    { name: "Huda S.", rating: 2, comment: "Eggs arrived broken. Need better packaging.", tag: "Packaging", time: "10h ago", sentiment: "negative" },
                    { name: "Zahra K.", rating: 5, comment: "Excellent customer service and fresh produce.", tag: "Service", time: "1d ago", sentiment: "positive" }
                ]
            },
            laundry: {
                sentiment: {
                    score: 4.6,
                    trend: "stable",
                    trendValue: 0,
                    insight: "‚ú® Strong performance in 'Premium Service' - consider expanding dry cleaning capacity."
                },
                reviews: [
                    { name: "Mariam A.", rating: 5, comment: "Perfect pressing! My suit looks brand new.", tag: "Quality", time: "30m ago", sentiment: "positive" },
                    { name: "Hassan N.", rating: 2, comment: "Button missing from my shirt after pickup.", tag: "Damage", time: "2h ago", sentiment: "negative" },
                    { name: "Lina W.", rating: 5, comment: "Always reliable and clothes come back smelling great!", tag: "Service", time: "4h ago", sentiment: "positive" },
                    { name: "Omar Z.", rating: 4, comment: "Good service but took longer than expected.", tag: "Late", time: "6h ago", sentiment: "neutral" },
                    { name: "Reem B.", rating: 1, comment: "Stain not removed from my favorite blouse. Very disappointed.", tag: "Quality", time: "8h ago", sentiment: "negative" },
                    { name: "Salem K.", rating: 5, comment: "Exceptional dry cleaning service. Highly recommend!", tag: "Quality", time: "1d ago", sentiment: "positive" }
                ]
            },
            market: {
                sentiment: {
                    score: 4.6,
                    trend: "up",
                    trendValue: 0.2,
                    insight: "üõí Strong performance in fresh produce - 'Quality Assurance' driving customer satisfaction."
                },
                reviews: [
                    { name: "Sara L.", rating: 5, comment: "Always fresh fruits and vegetables! Love this supermarket.", tag: "Quality", time: "1h ago", sentiment: "positive" },
                    { name: "Ahmed K.", rating: 4, comment: "Good selection but the checkout lines can be long during peak hours.", tag: "Wait Time", time: "3h ago", sentiment: "neutral" },
                    { name: "Fatima M.", rating: 5, comment: "Excellent meat quality and friendly butchers. Highly recommend!", tag: "Service", time: "5h ago", sentiment: "positive" },
                    { name: "Mohammed R.", rating: 3, comment: "Couldn't find organic milk. More organic options needed.", tag: "Missing Item", time: "7h ago", sentiment: "negative" },
                    { name: "Layla S.", rating: 5, comment: "Clean store and helpful staff. Always a great shopping experience!", tag: "Service", time: "1d ago", sentiment: "positive" },
                    { name: "Omar T.", rating: 4, comment: "Good prices but parking can be challenging.", tag: "Service", time: "1d ago", sentiment: "neutral" }
                ]
            }
        };

        // Vertical Configuration Engine
        const verticalConfig = {
            restaurant: {
                name: "Burger House",
                icon: "üçî",
                logo: "üçî",
                category: "restaurants",
                edition: "RESTAURANT EDITION",
                timeMetricLabel: "Prep Time",
                loadMetricLabel: "Kitchen Load",
                aiAction: "üöÄ Update burger prep time to 25 min during lunch rush",
                aiActionDesc: "Our signature burgers need more prep time during peak lunch hours",
                tickerMessage: "Hungry customers nearby - surge in burger orders",
                simulatorMetrics: {
                    timeMetric: "Prep Time",
                    stockoutMetric: "Stockout Rate",
                    responseMetric: "Response Time",
                    ratingMetric: "Customer Rating"
                },
                metrics: [
                    { label: "Availability", value: "75%", trend: "stable", color: "gray" },
                    { label: "Reliability", value: "65%", trend: "down", color: "red" },
                    { label: "Conversion", value: "22%", trend: "down", subtext: "-2%", color: "red" },
                    { label: "Prep Delay", value: "+4m", trend: "up", subtext: "Late", color: "red" },
                    { label: "Sentiment", value: "4.2‚òÖ", trend: "up", subtext: "Top 10%", color: "green" }
                ],
                tasks: [
                    {
                        title: "Update prep time to 25 min (Lunch Rush detected)",
                        points: 8,
                        type: "urgent",
                        icon: "‚è±Ô∏è"
                    },
                    {
                        title: "Accept 'Scheduled Order #482' for tomorrow",
                        points: 2,
                        type: "quick",
                        icon: "üìÖ"
                    },
                    {
                        title: "Upload photo for 'Spicy Burger' (Missing image)",
                        points: 5,
                        type: "quick",
                        icon: "üì∏"
                    }
                ]
            },
            mart: {
                name: "Al Madina Mart",
                icon: "üõí",
                logo: "üõí",
                category: "grocery stores",
                edition: "MART EDITION",
                timeMetricLabel: "Picking Time",
                loadMetricLabel: "Store Load",
                aiAction: "üì¶ Mark 'Al Marai Milk' as Low Stock (predicted run-out in 1 hour)",
                aiActionDesc: "Critical dairy item running low - reorder needed immediately",
                tickerMessage: "High demand for 'Dairy' in West Bay - stock up!",
                simulatorMetrics: {
                    timeMetric: "Picking Speed",
                    stockoutMetric: "Stockout Rate",
                    responseMetric: "Response Time",
                    ratingMetric: "Customer Rating"
                },
                metrics: [
                    { label: "Availability", value: "82%", trend: "up", color: "green" },
                    { label: "Reliability", value: "78%", trend: "up", color: "green" },
                    { label: "Conversion", value: "28%", trend: "up", subtext: "+3%", color: "green" },
                    { label: "Pick Rate", value: "12/min", trend: "up", subtext: "Items/min", color: "green" },
                    { label: "Sentiment", value: "4.5‚òÖ", trend: "up", subtext: "Top 5%", color: "green" }
                ],
                tasks: [
                    {
                        title: "Mark 'Al Marai Milk' Low Stock (Predicted run-out: 1h)",
                        points: 8,
                        type: "urgent",
                        icon: "ü•õ"
                    },
                    {
                        title: "Verify expiry dates for Batch #902 (Dairy)",
                        points: 5,
                        type: "routine",
                        icon: "üìÖ"
                    },
                    {
                        title: "Approve substitute for 'Organic Eggs' (Out of Stock)",
                        points: 3,
                        type: "quick",
                        icon: "ü•ö"
                    }
                ]
            },
            laundry: {
                name: "Fresh Clean Laundry",
                icon: "üëî",
                logo: "üëî",
                category: "laundry services",
                edition: "LAUNDRY EDITION",
                timeMetricLabel: "Turnaround Time",
                loadMetricLabel: "Capacity Load",
                aiAction: "‚è∞ Extend turnaround time to 48h due to high volume",
                aiActionDesc: "Surge in dry cleaning orders - adjust customer expectations",
                tickerMessage: "Surge in Dry Cleaning orders - capacity at 95%",
                simulatorMetrics: {
                    timeMetric: "Cleaning Speed",
                    stockoutMetric: "Capacity Issues",
                    responseMetric: "Response Time",
                    ratingMetric: "Customer Rating"
                },
                metrics: [
                    { label: "Availability", value: "91%", trend: "up", color: "green" },
                    { label: "Reliability", value: "85%", trend: "up", color: "green" },
                    { label: "Conversion", value: "35%", trend: "up", subtext: "+5%", color: "green" },
                    { label: "Turnaround", value: "24h", trend: "down", subtext: "Avg", color: "red" },
                    { label: "Sentiment", value: "4.6‚òÖ", trend: "up", subtext: "Top 3%", color: "green" }
                ],
                tasks: [
                    {
                        title: "Extend turnaround time to 48h (High Volume)",
                        points: 10,
                        type: "urgent",
                        icon: "‚è∞"
                    },
                    {
                        title: "Confirm pickup for 'Premium Suit Service'",
                        points: 4,
                        type: "quick",
                        icon: "üëî"
                    }
                ]
            },
            market: {
                name: "Al Meera Supermarket",
                icon: "üõí",
                logo: "üõí",
                category: "grocery stores",
                edition: "MARKET EDITION",
                timeMetricLabel: "Processing Time",
                loadMetricLabel: "Store Traffic",
                aiAction: "üì¶ Mark 'Al Marai Milk' Low Stock (predicted run-out in 1 hour)",
                aiActionDesc: "Critical dairy item running low - reorder needed immediately",
                tickerMessage: "High demand for 'Dairy' in West Bay - stock up!",
                simulatorMetrics: {
                    timeMetric: "Processing Speed",
                    stockoutMetric: "Stockout Rate",
                    responseMetric: "Response Time",
                    ratingMetric: "Customer Rating"
                },
                metrics: [
                    { label: "Availability", value: "98%", trend: "stable", color: "gray" },
                    { label: "Reliability", value: "99%", trend: "up", color: "green" },
                    { label: "Conversion", value: "35%", trend: "up", subtext: "+5%", color: "green" },
                    { label: "Pick Rate", value: "2 min/item", trend: "up", subtext: "Items/min", color: "green" },
                    { label: "Sentiment", value: "4.5‚òÖ", trend: "up", subtext: "Top 10%", color: "green" }
                ],
                tasks: [
                    {
                        title: "Mark 'Al Marai Milk' Low Stock (Predicted run-out: 1h)",
                        points: 8,
                        type: "urgent",
                        icon: "ü•õ"
                    },
                    {
                        title: "Approve substitute for 'Organic Eggs' (Out of Stock)",
                        points: 3,
                        type: "quick",
                        icon: "ü•ö"
                    },
                    {
                        title: "Update price for 'Imported Bananas' (+10%)",
                        points: 5,
                        type: "routine",
                        icon: "üçå"
                    }
                ]
            }
        };

        let currentVertical = 'restaurant';

        // Tier Progress Ladder Rendering
        function renderTierProgress() {
            const currentScore = 58; // This should ideally come from the actual score
            let currentTier = null;
            let nextTier = null;
            let progressToNext = 0;

            // Get current tier using exact boundaries
            const currentTierKey = getTier(currentScore).toLowerCase();
            currentTier = { ...tierData[currentTierKey], key: currentTierKey };

            // Find next tier
            const tierKeys = Object.keys(tierData);
            const currentIndex = tierKeys.indexOf(currentTierKey);
            if (currentIndex < tierKeys.length - 1) {
                const nextTierKey = tierKeys[currentIndex + 1];
                nextTier = { ...tierData[nextTierKey], key: nextTierKey };

                // Calculate progress to next tier
                const progressRange = nextTier.minScore - currentTier.minScore;
                const progressMade = currentScore - currentTier.minScore;
                progressToNext = Math.min(100, Math.max(0, (progressMade / progressRange) * 100));
            }

            // Generate HTML
            let html = '';

            // Progress Header
            if (nextTier) {
                const pointsNeeded = nextTier.minScore - currentScore;
                html += `
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-snoonu-gray dark:text-gray-400">Next Tier: ${nextTier.name}</span>
                            <span class="text-sm font-bold text-snoonu-red dark:text-red-400">${pointsNeeded} points away</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                            <div class="bg-snoonu-red dark:bg-red-500 h-2 rounded-full transition-all duration-300" style="width: ${progressToNext}%"></div>
                        </div>
                        <div class="flex justify-between text-xs text-snoonu-gray dark:text-gray-400 mt-1">
                            <span>${currentTier.name} (${currentTier.minScore})</span>
                            <span>${nextTier.name} (${nextTier.minScore})</span>
                        </div>
                    </div>
                `;
            }

            // Tier Ladder
            html += '<div class="space-y-3">';

            for (const [tierKey, tier] of Object.entries(tierData)) {
                const isCurrentTier = currentTier && tierKey === currentTier.key;
                const isLocked = !isCurrentTier && (!currentTier || tier.minScore > currentScore);

                let tierClasses = 'border-2 rounded-xl p-4 transition-all duration-300 ';
                let tierContentClasses = '';

                if (isCurrentTier) {
                    // Current tier - highlighted and glowing
                    tierClasses += 'border-snoonu-red dark:border-red-500 bg-snoonu-lightRed/50 dark:bg-red-900/20 dark:shadow-[0_0_10px_rgba(220,38,38,0.3)]';
                    tierContentClasses = 'opacity-100';
                } else if (isLocked) {
                    // Locked tier - dimmed
                    tierClasses += 'border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50 opacity-60 dark:opacity-40';
                    tierContentClasses = 'opacity-75';
                } else {
                    // Unlocked higher tier
                    tierClasses += 'border-green-300 dark:border-green-600 bg-green-50 dark:bg-green-900/20';
                    tierContentClasses = 'opacity-100';
                }

                html += `
                    <div class="${tierClasses}">
                        <div class="flex items-center justify-between mb-3 ${tierContentClasses}">
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">${tier.badge}</span>
                                <div>
                                    <h4 class="font-bold text-snoonu-black dark:text-snoonu-dark-white">${tier.name} Tier</h4>
                                    <span class="text-xs text-snoonu-gray dark:text-gray-400">${tier.minScore}-${tier.maxScore} points</span>
                                </div>
                            </div>
                            ${isCurrentTier ? '<span class="px-2 py-1 bg-snoonu-red text-white text-xs font-bold rounded-full">CURRENT</span>' : ''}
                            ${isLocked ? '<span class="text-gray-400 dark:text-gray-500">üîí</span>' : ''}
                        </div>
                        <ul class="space-y-1 ${tierContentClasses}">
                            ${tier.benefits.map(benefit =>
                                `<li class="text-sm flex items-center ${isCurrentTier ? 'text-snoonu-gray dark:text-gray-400' : 'text-snoonu-gray dark:text-gray-500'}">
                                    <span class="mr-2 ${isCurrentTier ? 'text-green-600 dark:text-green-400' : 'text-gray-400'}">${isCurrentTier ? '‚úì' : '‚óã'}</span>
                                    ${benefit}
                                </li>`
                            ).join('')}
                        </ul>
                    </div>
                `;

                // Add teaser for next tier (Silver)
                if (tierKey === 'silver' && isLocked && currentTier && currentTier.key === 'bronze') {
                    html += `
                        <div class="bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-200 dark:border-yellow-700/50 rounded-lg p-3 mt-2">
                            <p class="text-sm text-yellow-800 dark:text-yellow-200 font-medium">
                                üéØ Unlock Priority Support & Ad Credits by reaching 60 points!
                            </p>
                        </div>
                    `;
                }
            }

            html += '</div>';

            document.getElementById('tierProgressSection').innerHTML = html;
        }

        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const sunIcon = document.getElementById('sunIcon');
        const moonIcon = document.getElementById('moonIcon');
        const html = document.documentElement;

        // Force Dark Mode by default
        const savedTheme = localStorage.getItem('snoonu-theme') || 'dark';
        html.classList.add('dark');
        sunIcon.classList.add('hidden');
        moonIcon.classList.remove('hidden');

        themeToggle.addEventListener('click', () => {
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                localStorage.setItem('snoonu-theme', 'light');
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            } else {
                html.classList.add('dark');
                localStorage.setItem('snoonu-theme', 'dark');
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            }
        });

        // Vertical Switcher Functionality
        const verticalSwitcher = document.getElementById('verticalSwitcher');

        function updateDashboardVertical(vertical) {
            const config = verticalConfig[vertical];
            if (!config) return;

            currentVertical = vertical;

            // Update merchant information
            document.getElementById('merchantName').textContent = config.name;
            const bigLogo = document.getElementById('big-merchant-logo');
            if (bigLogo) {
                bigLogo.textContent = config.logo;
            }
            document.getElementById('merchantIcon').textContent = config.icon;
            document.getElementById('merchantCategory').textContent = config.category;
            document.getElementById('editionLabel').textContent = config.edition;

            // Update metrics
            renderMetrics(currentVertical);

            // Update AI action
            document.getElementById('aiActionTitle').textContent = config.aiAction;
            document.getElementById('aiActionDesc').textContent = config.aiActionDesc;

            // Update ticker message
            document.getElementById('tickerMessage').innerHTML = `üì¢ ${config.tickerMessage}`;

            // Update tier progress (in case tiers differ by vertical in future)
            renderTierProgress();

            // Update feedback tab content
            updateFeedbackTab(currentVertical);

            // Update simulator metrics
            document.getElementById('timeMetricIcon').textContent = '‚è±Ô∏è';
            document.getElementById('timeMetricLabel').textContent = config.simulatorMetrics.timeMetric;
            document.getElementById('stockoutMetricIcon').textContent = 'üì¶';
            document.getElementById('stockoutMetricLabel').textContent = config.simulatorMetrics.stockoutMetric;
            document.getElementById('responseMetricIcon').textContent = 'üí¨';
            document.getElementById('responseMetricLabel').textContent = config.simulatorMetrics.responseMetric;
            document.getElementById('ratingMetricIcon').textContent = '‚≠ê';
            document.getElementById('ratingMetricLabel').textContent = config.simulatorMetrics.ratingMetric;

            // Save vertical preference
            localStorage.setItem('snoonu-vertical', vertical);
        }

        // Load saved vertical
        const savedVertical = localStorage.getItem('snoonu-vertical') || 'restaurant';
        verticalSwitcher.value = savedVertical;
        updateDashboardVertical(savedVertical);

        verticalSwitcher.addEventListener('change', (e) => {
            updateDashboardVertical(e.target.value);
        });

        // Tab switching
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-white', 'text-snoonu-red');
                btn.classList.add('text-white', 'hover:bg-white/20');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');

            // Highlight selected button
            event.target.classList.remove('text-white', 'hover:bg-white/20');
            event.target.classList.add('bg-white', 'text-snoonu-red');
        }

        // Simulator modal
        // ScoreLab Simulator Modal
        let selectedPlan = null;

        function openSimulator() {
            document.getElementById('simulatorModal').classList.remove('hidden');
            document.getElementById('simulatorModal').classList.add('flex');
            updateSimulation(); // Initialize with current values
        }

        function closeSimulator() {
            document.getElementById('simulatorModal').classList.add('hidden');
            document.getElementById('simulatorModal').classList.remove('flex');
            selectedPlan = null;
            document.getElementById('applyPlanBtn').disabled = true;
            // Reset plan selection visual
            document.querySelectorAll('.plan-card').forEach(card => {
                card.classList.remove('ring-4', 'ring-snoonu-red', 'dark:ring-snoonu-dark-red');
            });
        }

        function updateSimulation() {
            // Get current slider values
            const prepTime = parseInt(document.getElementById('prepTimeSlider').value);
            const stockoutRate = parseInt(document.getElementById('stockoutSlider').value);
            const responseTime = parseInt(document.getElementById('responseSlider').value);
            const rating = parseFloat(document.getElementById('ratingSlider').value);

            // Update display values
            document.getElementById('prepTimeValue').textContent = `${prepTime} min`;
            document.getElementById('stockoutValue').textContent = `${stockoutRate}%`;
            document.getElementById('responseValue').textContent = `${responseTime} min`;
            document.getElementById('ratingValue').textContent = `${rating.toFixed(1)}/5`;

            // Calculate new score (simplified model)
            const currentScore = 58;
            let scoreChange = 0;

            // Prep time impact (lower prep time = faster service = higher score)
            // Using max baseline: 45min max, 5min min, so faster = more points
            let timePoints = (45 - prepTime) * 1.5; // 5min = 60pts, 45min = 0pts
            scoreChange += timePoints - 30; // Normalize around 0 (30 is midpoint)

            // Stockout impact (lower stockouts = higher score)
            scoreChange += (15 - stockoutRate) * 0.8;

            // Response time impact (faster response = higher score)
            if (responseTime < 5) scoreChange += (5 - responseTime) * 0.6;
            else if (responseTime > 10) scoreChange -= (responseTime - 10) * 0.4;

            // Rating impact
            scoreChange += (rating - 3.8) * 3;

            const newScore = Math.max(0, Math.min(100, currentScore + scoreChange));
            const salesGrowth = Math.max(-30, Math.min(40, scoreChange * 1.2 + (rating - 3.8) * 8));
            const profitIncrease = Math.round(salesGrowth * 13.5); // Average order value impact

            // Update display
            document.getElementById('predictedScore').textContent = Math.round(newScore);
            document.getElementById('scoreChange').textContent = `${scoreChange > 0 ? '+' : ''}${Math.round(scoreChange)} points`;
            document.getElementById('salesGrowth').textContent = `${salesGrowth > 0 ? '+' : ''}${Math.round(salesGrowth)}%`;
            document.getElementById('profitIncrease').textContent = `${profitIncrease > 0 ? '+' : ''}$${Math.abs(profitIncrease)}/day`;

            // Update tier using exact boundaries
            const tier = getTier(newScore);
            let benefits = 'Basic';
            if (tier === 'Gold') {
                benefits = '+Lower Commission';
            } else if (tier === 'Silver') {
                benefits = '+Ad Credits';
            } else if (tier === 'Platinum') {
                benefits = '+VIP Support';
            }

            document.getElementById('tierChange').textContent = tier;
            document.getElementById('tierBenefits').textContent = benefits;

            // Add pulsing effect to generate button to indicate new strategies are available
            const generateBtn = document.getElementById('generateBtn');
            generateBtn.classList.add('animate-pulse');
        }

        function selectPlan(planType) {
            selectedPlan = planType;

            // Remove selection from all cards
            document.querySelectorAll('.plan-card').forEach(card => {
                card.classList.remove('ring-4', 'ring-snoonu-red', 'dark:ring-snoonu-dark-red');
            });

            // Add selection to clicked card
            const selectedCard = document.querySelector(`[data-plan="${planType}"]`);
            selectedCard.classList.add('ring-4', 'ring-snoonu-red', 'dark:ring-snoonu-dark-red');

            // Enable apply button
            document.getElementById('applyPlanBtn').disabled = false;

            // Auto-adjust sliders based on plan
            switch(planType) {
                case 'profit':
                    // Focus on rating and moderate improvements
                    document.getElementById('ratingSlider').value = '4.5';
                    document.getElementById('stockoutSlider').value = '8';
                    document.getElementById('prepTimeSlider').value = '20';
                    document.getElementById('responseSlider').value = '3';
                    break;
                case 'score':
                    // Maximize all improvements
                    document.getElementById('ratingSlider').value = '4.8';
                    document.getElementById('stockoutSlider').value = '2';
                    document.getElementById('prepTimeSlider').value = '35';
                    document.getElementById('responseSlider').value = '2';
                    break;
                case 'balanced':
                    // Moderate improvements across all areas
                    document.getElementById('ratingSlider').value = '4.2';
                    document.getElementById('stockoutSlider').value = '6';
                    document.getElementById('prepTimeSlider').value = '28';
                    document.getElementById('responseSlider').value = '4';
                    break;
            }

            updateSimulation();
        }

        function applySelectedPlan() {
            if (!selectedPlan) return;

            // Get current slider values
            const prepTime = parseInt(document.getElementById('prepTimeSlider').value);
            const stockoutRate = parseInt(document.getElementById('stockoutSlider').value);
            const rating = parseFloat(document.getElementById('ratingSlider').value);

            // Get strategy name
            let strategyName = '';
            switch(selectedPlan) {
                case 'aggressive':
                    strategyName = 'Aggressive Rollout';
                    break;
                case 'optimization':
                    strategyName = 'Process Optimization';
                    break;
                case 'tech':
                    strategyName = 'Tech-First Approach';
                    break;
            }

            alert(`üéØ Strategy Locked: Targeting ${prepTime}min prep time, ${stockoutRate}% stockout, ${rating.toFixed(1)} rating via ${strategyName}.\n\nTasks added to Dashboard:\n‚Ä¢ Implementation timeline: 1-2 weeks\n‚Ä¢ Expected score improvement: +8-15 points\n‚Ä¢ Budget impact: Calculated based on strategy\n‚Ä¢ Success metrics: Monitored automatically`);

            closeSimulator();
        }

        // Strategy Generation
        function generateStrategies() {
            // Get current slider values
            const prepTime = parseInt(document.getElementById('prepTimeSlider').value);
            const stockoutRate = parseInt(document.getElementById('stockoutSlider').value);
            const rating = parseFloat(document.getElementById('ratingSlider').value);

            // Generate dynamic strategies based on current values
            const strategies = [
                {
                    id: 'aggressive',
                    name: 'Aggressive Rollout',
                    icon: '‚ö°',
                    description: `Achieve ${stockoutRate - 2}% stockout in 1 week by hiring 1 extra packer`,
                    gradient: 'from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20',
                    border: 'border-red-200 dark:border-red-700',
                    hoverBorder: 'hover:border-red-400 dark:hover:border-red-500',
                    textColor: 'text-red-800 dark:text-red-300',
                    subTextColor: 'text-red-600 dark:text-red-400'
                },
                {
                    id: 'optimization',
                    name: 'Process Optimization',
                    icon: 'üîß',
                    description: `Reach ${rating.toFixed(1)} rating by retraining staff on packing SOPs`,
                    gradient: 'from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20',
                    border: 'border-blue-200 dark:border-blue-700',
                    hoverBorder: 'hover:border-blue-400 dark:hover:border-blue-500',
                    textColor: 'text-blue-800 dark:text-blue-300',
                    subTextColor: 'text-blue-600 dark:text-blue-400'
                },
                {
                    id: 'tech',
                    name: 'Tech-First Approach',
                    icon: 'ü§ñ',
                    description: `Reduce prep time to ${prepTime}m using auto-accept rules`,
                    gradient: 'from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20',
                    border: 'border-green-200 dark:border-green-700',
                    hoverBorder: 'hover:border-green-400 dark:hover:border-green-500',
                    textColor: 'text-green-800 dark:text-green-300',
                    subTextColor: 'text-green-600 dark:text-green-400'
                }
            ];

            // Generate HTML for strategy cards
            const plansGrid = document.getElementById('plansGrid');
            plansGrid.innerHTML = '';

            strategies.forEach(strategy => {
                const cardHTML = `
                    <div class="bg-gradient-to-br ${strategy.gradient} rounded-xl p-6 border-2 ${strategy.border} ${strategy.hoverBorder} transition-colors cursor-pointer plan-card" data-plan="${strategy.id}" onclick="selectPlan('${strategy.id}')">
                        <div class="text-center mb-4">
                            <div class="text-3xl mb-2">${strategy.icon}</div>
                            <h4 class="font-bold ${strategy.textColor}">${strategy.name}</h4>
                            <p class="${strategy.subTextColor} text-sm">${strategy.description}</p>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="${strategy.subTextColor}">Target Prep Time:</span>
                                <span class="font-bold ${strategy.textColor}">${prepTime} min</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="${strategy.subTextColor}">Target Stockout:</span>
                                <span class="font-bold ${strategy.textColor}">${stockoutRate}%</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="${strategy.subTextColor}">Target Rating:</span>
                                <span class="font-bold ${strategy.textColor}">${rating.toFixed(1)}/5</span>
                            </div>
                        </div>
                    </div>
                `;
                plansGrid.innerHTML += cardHTML;
            });

            // Show the plans container
            document.getElementById('plansContainer').classList.remove('hidden');

            // Stop pulsing animation on generate button
            document.getElementById('generateBtn').classList.remove('animate-pulse');
        }

        // Render Sentiment Dashboard
        function renderSentimentDashboard(vertical) {
            const sentiment = feedbackData[vertical].sentiment;

            document.getElementById('sentimentScore').textContent = sentiment.score;
            document.getElementById('trendArrow').textContent = sentiment.trend === 'up' ? '‚Üó' : sentiment.trend === 'down' ? '‚Üò' : '‚Üí';
            document.getElementById('trendValue').textContent = sentiment.trendValue === 0 ? 'Stable' : `${sentiment.trendValue} pts`;
            document.getElementById('trendValue').className = `text-xl font-bold ${sentiment.trend === 'up' ? 'text-green-500' : sentiment.trend === 'down' ? 'text-red-500' : 'text-gray-500'}`;
            document.getElementById('aiInsight').textContent = sentiment.insight;
        }

        // Render Feedback Reviews
        function renderFeedbackReviews(vertical) {
            const reviews = feedbackData[vertical].reviews;
            const container = document.getElementById('feedbackContainer');

            // Analyze reviews for actionable insights
            const tagCounts = {};
            reviews.forEach(review => {
                tagCounts[review.tag] = (tagCounts[review.tag] || 0) + 1;
            });

            // Find the most problematic tag
            const topIssueTag = Object.keys(tagCounts).reduce((a, b) => tagCounts[a] > tagCounts[b] ? a : b);

            // Generate suggested task based on top issue
            let suggestedTask = '';
            let taskIcon = 'üö®';
            switch(topIssueTag) {
                case 'Packaging':
                    suggestedTask = 'Improve packaging quality - multiple customers reporting damaged/leaked items';
                    taskIcon = 'üì¶';
                    break;
                case 'Late':
                    suggestedTask = 'Speed up delivery times - customers complaining about delays';
                    taskIcon = '‚è±Ô∏è';
                    break;
                case 'Missing Item':
                    suggestedTask = 'Double-check orders before dispatch - items missing from deliveries';
                    taskIcon = 'üîç';
                    break;
                case 'Quality':
                    suggestedTask = 'Review product quality standards - mixed feedback on food quality';
                    taskIcon = '‚≠ê';
                    break;
                case 'Service':
                    suggestedTask = 'Staff training on customer service - improve interaction quality';
                    taskIcon = 'üë•';
                    break;
                default:
                    suggestedTask = 'Monitor customer feedback trends and address top concerns';
                    taskIcon = 'üìä';
            }

            // Group reviews by sentiment
            const positiveReviews = reviews.filter(r => r.sentiment === 'positive').slice(0, 3);
            const negativeReviews = reviews.filter(r => r.sentiment === 'negative').slice(0, 3);

            let html = '';

            // Attention Needed Section
            if (negativeReviews.length > 0) {
                html += `
                    <div class="mb-6">
                        <h4 class="text-lg font-bold text-red-600 dark:text-red-400 mb-3 flex items-center">
                            <span class="mr-2">üö®</span> Attention Needed (${negativeReviews.length})
                        </h4>
                        <div class="space-y-3 max-h-[300px] overflow-y-auto">
                            ${negativeReviews.map(review => `
                                <div class="border-2 border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/10 rounded-lg p-4">
                                    <div class="flex items-start justify-between mb-2">
                                        <div class="flex items-center space-x-2">
                                            <span class="font-bold text-snoonu-black dark:text-white">${review.name}</span>
                                            <span class="text-yellow-500">${'‚≠ê'.repeat(review.rating)}${'‚òÜ'.repeat(5-review.rating)}</span>
                                            <span class="px-2 py-1 bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-200 text-xs rounded-full">${review.tag}</span>
                                        </div>
                                        <span class="text-xs text-snoonu-gray dark:text-gray-400">${review.time}</span>
                                    </div>
                                    <p class="text-sm text-snoonu-black dark:text-gray-300">${review.comment}</p>
                                </div>
                            `).join('')}
                        </div>

                        <!-- Suggested Task -->
                        <div class="mt-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4">
                            <h5 class="font-bold text-blue-900 dark:text-blue-200 text-sm mb-2 flex items-center">
                                <span class="mr-2">${taskIcon}</span> AI-Suggested Action
                            </h5>
                            <p class="text-blue-800 dark:text-blue-300 text-sm mb-3">${suggestedTask}</p>
                            <button class="bg-snoonu-red hover:bg-snoonu-darkRed text-white px-4 py-2 rounded-lg font-bold text-sm shadow hover:shadow-md transition-all duration-200">
                                Create Task
                            </button>
                        </div>
                    </div>
                `;
            }

            // Recent Praise Section
            if (positiveReviews.length > 0) {
                html += `
                    <div class="mb-6">
                        <h4 class="text-lg font-bold text-green-600 dark:text-green-400 mb-3 flex items-center">
                            <span class="mr-2">üíö</span> Recent Praise (${positiveReviews.length})
                        </h4>
                        <div class="space-y-3 max-h-[200px] overflow-y-auto">
                            ${positiveReviews.map(review => `
                                <div class="border-2 border-green-200 dark:border-green-700 bg-green-50 dark:bg-green-900/10 rounded-lg p-4">
                                    <div class="flex items-start justify-between mb-2">
                                        <div class="flex items-center space-x-2">
                                            <span class="font-bold text-snoonu-black dark:text-white">${review.name}</span>
                                            <span class="text-yellow-500">${'‚≠ê'.repeat(review.rating)}${'‚òÜ'.repeat(5-review.rating)}</span>
                                            <span class="px-2 py-1 bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-200 text-xs rounded-full">${review.tag}</span>
                                        </div>
                                        <span class="text-xs text-snoonu-gray dark:text-gray-400">${review.time}</span>
                                    </div>
                                    <p class="text-sm text-snoonu-black dark:text-gray-300">${review.comment}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        // Render Dynamic Metrics
        function renderMetrics(verticalKey) {
            const metrics = verticalConfig[verticalKey].metrics;
            const container = document.getElementById('metricsContainer');

            container.innerHTML = '';

            metrics.forEach(metric => {
                const trendIcon = metric.trend === 'up' ? '‚Üó' : metric.trend === 'down' ? '‚Üò' : '‚Üí';
                const trendColor = metric.trend === 'up' ? 'text-green-500' : metric.trend === 'down' ? 'text-red-500' : 'text-gray-400';
                const subtextColor = metric.color === 'green' ? 'text-green-600 dark:text-green-400' : metric.color === 'red' ? 'text-red-600 dark:text-red-400' : 'text-gray-600 dark:text-gray-400';

                const html = `
                    <div class="p-3 rounded-xl border border-gray-100 dark:border-white/10 bg-gray-50 dark:bg-white/5 backdrop-blur-sm shadow-sm transition-all hover:scale-105">
                        <div class="text-xs font-medium text-gray-500 dark:text-gray-400 mb-1 flex justify-between">
                            ${metric.label}
                            <span class="${trendColor}">${trendIcon}</span>
                        </div>
                        <div class="text-lg font-black text-gray-800 dark:text-white">${metric.value}</div>
                        ${metric.subtext ? `<div class="text-[10px] font-bold ${subtextColor}">${metric.subtext}</div>` : ''}
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        // Render Celebrity Cards
        function renderCelebrityCards() {
            const container = document.getElementById('celebrityContainer');
            const currentTier = 'Bronze'; // This should come from actual merchant tier data

            container.innerHTML = '';

            celebrityData.forEach(celebrity => {
                const isGoldOrPlatinum = getTierLevel(currentTier) >= getTierLevel('Gold');
                const isPlatinum = getTierLevel(currentTier) >= getTierLevel('Platinum');
                const isLocked = !isGoldOrPlatinum;

                let cardClasses = 'bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md rounded-xl p-6 theme-transition ';
                let contentClasses = '';

                if (isLocked) {
                    cardClasses += 'opacity-60 relative overflow-hidden';
                    contentClasses = 'blur-sm';
                } else if (isPlatinum) {
                    cardClasses += 'hover:shadow-xl dark:shadow-[0_0_20px_rgba(168,85,247,0.3)] border-purple-300 dark:border-purple-600';
                } else {
                    cardClasses += 'hover:shadow-xl dark:shadow-[0_0_15px_rgba(220,38,38,0.1)]';
                }

                const html = `
                    <div class="${cardClasses}" ${isLocked ? `onclick="showUpgradeAlert()"` : ''}>
                        ${isLocked ? `<div class="absolute inset-0 bg-black/20 dark:bg-black/40 flex flex-col items-center justify-center z-10">
                            <span class="text-4xl mb-2">üîí</span>
                            <span class="text-white text-sm font-bold px-3 py-1 bg-red-600 rounded-full">
                                Upgrade to Gold to Unlock Celebrity Ads
                            </span>
                        </div>` : ''}

                        <div class="${contentClasses}">
                            <div class="text-center mb-4">
                                <div class="text-6xl mb-3">${celebrity.avatar}</div>
                                <h5 class="text-lg font-bold text-snoonu-black dark:text-white mb-1">${celebrity.name}</h5>
                                <p class="text-sm text-snoonu-gray dark:text-gray-400 mb-2">${celebrity.description}</p>
                            </div>

                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span class="text-snoonu-gray dark:text-gray-400">Reach:</span>
                                    <span class="font-medium text-snoonu-black dark:text-white">${celebrity.reach}</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-snoonu-gray dark:text-gray-400">Niche:</span>
                                    <span class="font-medium text-snoonu-black dark:text-white">${celebrity.niche}</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-snoonu-gray dark:text-gray-400">Investment:</span>
                                    <span class="font-medium ${isPlatinum ? 'line-through text-gray-500 dark:text-gray-600' : 'text-green-600 dark:text-green-400'}">${isPlatinum ? celebrity.cost : celebrity.cost}</span>
                                </div>
                            </div>

                            <div class="flex items-center justify-between">
                                <span class="px-3 py-1 bg-gradient-to-r from-yellow-400 to-yellow-600 text-yellow-900 text-xs font-bold rounded-full shadow-sm">
                                    Celebrity Partner
                                </span>

                                ${!isLocked ?
                                    `<button onclick="bookCelebrity('${celebrity.name}', '${currentTier}')" class="bg-snoonu-red hover:bg-snoonu-darkRed text-white px-4 py-2 rounded-lg font-bold text-sm shadow hover:shadow-md transition-all duration-200 ${isPlatinum ? 'bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800' : ''}">
                                        ${isPlatinum ? 'Book for FREE (VIP Reward)' : `Book for ${celebrity.cost}`}
                                    </button>` :
                                    `<span class="text-sm text-gray-500 dark:text-gray-400 font-medium">
                                        üîí Requires Gold Tier
                                    </span>`
                                }
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        // Function to get tier based on exact score boundaries
        function getTier(score) {
            // 0 to 59 = Bronze
            if (score < 60) {
                return 'Bronze';
            }
            // 60 to 79 = Silver (Must be exactly 60 or higher to unlock)
            else if (score >= 60 && score < 80) {
                return 'Silver';
            }
            // 80 to 94 = Gold
            else if (score >= 80 && score < 95) {
                return 'Gold';
            }
            // 95 to 100 = Platinum
            else if (score >= 95) {
                return 'Platinum';
            }
        }

        // Helper function to get tier level for comparison
        function getTierLevel(tierName) {
            const tiers = { 'Bronze': 1, 'Silver': 2, 'Gold': 3, 'Platinum': 4 };
            return tiers[tierName] || 0;
        }

        // Show upgrade alert function
        function showUpgradeAlert() {
            alert('üö´ Access Denied! Upgrade to Gold Tier to unlock celebrity advertising partnerships.');
        }

        // Book celebrity function
        function bookCelebrity(name, tier) {
            if (tier === 'Platinum') {
                alert('VIP Request Sent! This collaboration is on us. üíé Expect a response within 24 hours.');
            } else {
                alert(`Payment Gateway: Charge ${name === 'Noor The Foodie' ? '500' : name === 'Ahmed Al-Mulla' ? '1,500' : 'Contact Agent'} QAR to your account? [This will initiate the celebrity partnership]`);
            }
        }

        // Tier Gating for Analytics Features
        function updateAnalyticsTierAccess() {
            const currentTier = 'Bronze'; // This should come from actual merchant tier data
            const predictionLock = document.getElementById('predictionLock');
            const predictionChart = document.getElementById('predictionChart');
            const autoPrepareBtn = document.getElementById('autoPrepareBtn');

            if (getTierLevel(currentTier) < getTierLevel('Gold')) {
                // Bronze/Silver: Show lock overlay, blur content
                predictionLock.classList.remove('opacity-0', 'pointer-events-none');
                predictionLock.classList.add('opacity-100');
                predictionChart.classList.add('blur-sm', 'pointer-events-none');
                autoPrepareBtn.classList.remove('opacity-100', 'pointer-events-auto');
                autoPrepareBtn.classList.add('opacity-0', 'pointer-events-none');
            } else {
                // Gold/Platinum: Show full access
                predictionLock.classList.remove('opacity-100');
                predictionLock.classList.add('opacity-0', 'pointer-events-none');
                predictionChart.classList.remove('blur-sm', 'pointer-events-none');

                if (getTierLevel(currentTier) >= getTierLevel('Platinum')) {
                    // Platinum: Show auto-prepare button
                    autoPrepareBtn.classList.remove('opacity-0', 'pointer-events-none');
                    autoPrepareBtn.classList.add('opacity-100', 'pointer-events-auto');
                }
            }
        }

        // Update Feedback Tab
        function updateFeedbackTab(vertical) {
            renderSentimentDashboard(vertical);
            renderFeedbackReviews(vertical);
        }

        // Set initial active tab
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelector('.tab-btn').click();
            renderTierProgress(); // Initialize tier progress ladder
            renderMetrics('restaurant'); // Initialize metrics
            updateFeedbackTab('restaurant'); // Initialize feedback tab
            renderCelebrityCards(); // Initialize celebrity cards
            updateAnalyticsTierAccess(); // Initialize analytics tier access

            // Initialize Charts
            // --- Chart 1: Sales Growth (Gradient Line) ---
            const ctxSales = document.getElementById('salesChart').getContext('2d');

            // Create a Red Gradient for the line
            const gradientSales = ctxSales.createLinearGradient(0, 0, 0, 400);
            gradientSales.addColorStop(0, 'rgba(239, 68, 68, 0.5)'); // Red top
            gradientSales.addColorStop(1, 'rgba(239, 68, 68, 0)');   // Transparent bottom

            new Chart(ctxSales, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Revenue (QAR)',
                        data: [1200, 1900, 1500, 2200, 2800, 3100, 3800], // The "Growth" Curve
                        borderColor: '#ef4444', // Snoonu Red
                        backgroundColor: gradientSales,
                        borderWidth: 3,
                        pointBackgroundColor: '#ffffff',
                        pointBorderColor: '#ef4444',
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        fill: true,
                        tension: 0.4 // Makes the line smooth (curved)
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.9)',
                            titleColor: '#fff',
                            bodyColor: '#ccc',
                            borderColor: 'rgba(255,255,255,0.1)',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: 'rgba(255, 255, 255, 0.05)' },
                            ticks: { color: '#6b7280' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: '#6b7280' }
                        }
                    }
                }
            });

            // --- Chart 2: Top Products (Bar Chart) ---
            const ctxProducts = document.getElementById('productsChart').getContext('2d');

            new Chart(ctxProducts, {
                type: 'bar',
                data: {
                    labels: ['Spicy Burger', 'Cheese Fries', 'Cola Zero', 'Chicken Wrap'],
                    datasets: [{
                        label: 'Units Sold',
                        data: [145, 98, 85, 62], // The Data
                        backgroundColor: [
                            '#ef4444', // Red (Top Seller)
                            '#f87171', // Light Red
                            '#fca5a5', // Lighter Red
                            '#374151'  // Gray (The Rest)
                        ],
                        borderRadius: 6,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            grid: { color: 'rgba(255, 255, 255, 0.05)' },
                            ticks: { color: '#6b7280' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: '#9ca3af', font: { weight: 'bold' } }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
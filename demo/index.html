<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snoonu MerchantOS - Hackathon Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        snoonu: {
                            red: '#E53E3E',
                            darkRed: '#C53030',
                            lightRed: '#FED7D7',
                            black: '#1A202C',
                            darkGray: '#2D3748',
                            gray: '#4A5568',
                            lightGray: '#E2E8F0',
                            white: '#FFFFFF',
                            'dark-red': '#FF6B6B',
                            'dark-darkRed': '#FF5252',
                            'dark-lightRed': '#2D1810',
                            'dark-black': '#0F0F0F',
                            'dark-darkGray': '#1A1A1A',
                            'dark-gray': '#2A2A2A',
                            'dark-lightGray': '#404040',
                            'dark-white': '#F5F5F5',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        .animate-pulse-slow {
            animation: pulse 3s ease-in-out infinite;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .theme-transition {
            transition: all 0.3s ease;
        }

        /* Force Dark Mode on Dropdown Options */
        .dark option {
            background-color: #1a0505; /* Dark Red/Black */
            color: white;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 dark:bg-black dark:text-white transition-colors duration-300">
    <!-- Dark Mode Background Wrapper -->
    <div class="min-h-screen dark:bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] dark:from-[#4a0404] dark:via-[#1a0505] dark:to-black">
        <!-- Header -->
    <header class="bg-snoonu-red text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <div class="bg-white text-snoonu-red px-4 py-2 rounded-xl font-black text-xl">
                        SNOONU
                    </div>
                    <div class="text-white font-bold text-lg">MerchantOS</div>
                    <div class="ml-4 relative">
                        <select id="verticalSwitcher" class="
                            appearance-none cursor-pointer
                            bg-white text-snoonu-black
                            dark:bg-black/80 dark:text-white dark:border-red-500/50
                            border-2 border-transparent
                            px-4 py-2 pr-8 rounded-xl font-bold text-sm
                            focus:outline-none focus:ring-2 focus:ring-red-500
                            transition-all shadow-lg
                        ">
                            <option value="restaurant">üçî Restaurant</option>
                            <option value="mart">üõí Grocery/Mart</option>
                            <option value="laundry">üëî Laundry</option>
                            <option value="pharmacy">üíä Pharmacy</option>
                        </select>
                        <!-- Custom Arrow Icon -->
                        <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                            <svg class="w-4 h-4 text-snoonu-black dark:text-white dark:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="bg-snoonu-lightRed text-snoonu-red px-3 py-1 rounded-full text-xs font-bold">
                        <span id="editionLabel">RESTAURANT EDITION</span>
                    </div>
                </div>
                <div class="flex items-center space-4">
                    <button id="themeToggle" class="w-12 h-12 rounded-full bg-white/20 hover:bg-white/30 transition-all flex items-center justify-center">
                        <span id="sunIcon">‚òÄÔ∏è</span>
                        <span id="moonIcon" class="hidden">üåô</span>
                    </button>
                    <nav class="flex space-x-2 ml-4">
                        <button onclick="showTab('dashboard')" class="tab-btn px-4 py-3 rounded-xl text-sm font-bold transition-all bg-white text-snoonu-red">
                            üè† Dashboard
                        </button>
                        <button onclick="showTab('feedback')" class="tab-btn px-4 py-3 rounded-xl text-sm font-bold transition-all text-white hover:bg-white/20">
                            üí¨ Feedback
                        </button>
                        <button onclick="showTab('campaign')" class="tab-btn px-4 py-3 rounded-xl text-sm font-bold transition-all text-white hover:bg-white/20">
                            üéØ Campaign
                        </button>
                        <button onclick="showTab('calculator')" class="tab-btn px-4 py-3 rounded-xl text-sm font-bold transition-all text-white hover:bg-white/20">
                            üí∞ Calculator
                        </button>
                    </nav>
                </div>
            </div>
            <!-- Ticker Message -->
            <div id="tickerMessage" class="bg-yellow-100 dark:bg-yellow-900/20 border-l-4 border-yellow-500 text-yellow-800 dark:text-yellow-200 px-4 py-2 text-sm font-medium">
                üì¢ Hungry customers nearby - surge in burger orders
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-8">

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Score Card -->
                    <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 relative overflow-hidden theme-transition">
                        <div class="absolute inset-0 bg-restaurant-pattern opacity-50"></div>
                        <div class="relative z-10">
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex items-center space-x-4">
                                    <div class="text-4xl bg-snoonu-lightRed dark:bg-snoonu-dark-lightRed rounded-full p-3">üçî</div>
                                    <div>
                                        <h2 id="merchantName" class="text-2xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Burger House</h2>
                                        <p class="text-snoonu-gray dark:text-gray-400 capitalize flex items-center">
                                            <span id="merchantIcon" class="mr-2 dark:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]">üè™</span><span id="merchantCategory">restaurants</span>
                                        </p>
                                    </div>
                                </div>
                                <div class="px-4 py-2 rounded-full text-white text-sm font-semibold bg-snoonu-red">
                                    Bronze Tier
                                </div>
                            </div>

                            <div class="text-center mb-6">
                                <div class="text-6xl font-black text-snoonu-black dark:text-snoonu-dark-white mb-2">58</div>
                                <div class="text-snoonu-gray dark:text-gray-400 font-medium">Merchant Score</div>
                            </div>

                            <div class="text-center mb-6">
                                <button onclick="openSimulator()" class="bg-snoonu-red hover:bg-snoonu-darkRed text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
                                    üéØ What If I Improve?
                                </button>
                            </div>

                            <div id="metricsContainer" class="grid grid-cols-2 lg:grid-cols-5 gap-3 mt-6">
                                <!-- Metrics will be dynamically rendered here -->
                            </div>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition">
                        <div class="flex items-center mb-6">
                            <div class="text-2xl mr-3">üöÄ</div>
                            <div>
                                <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Autopilot Actions</h3>
                                <p class="text-snoonu-gray dark:text-gray-400 text-sm">One-click fixes to boost your score</p>
                            </div>
                        </div>

                            <div class="space-y-4">
                            <div class="border-2 border-snoonu-lightGray dark:border-snoonu-dark-lightGray rounded-xl p-5 hover:border-snoonu-red dark:hover:border-snoonu-dark-red transition-all duration-200">
                                <h4 id="aiActionTitle" class="font-bold text-snoonu-black dark:text-snoonu-dark-white text-lg mb-2">üöÄ Update burger prep time to 25 min during lunch rush</h4>
                                <p id="aiActionDesc" class="text-snoonu-gray dark:text-gray-400 mb-3">Our signature burgers need more prep time during peak lunch hours</p>
                                <div class="flex items-center space-x-6 text-sm">
                                    <div class="flex items-center text-snoonu-gray dark:text-gray-400">
                                        <span class="mr-2">‚è±Ô∏è</span>
                                        <span class="font-medium">3 min</span>
                                    </div>
                                    <div class="flex items-center text-snoonu-red dark:text-snoonu-dark-red font-semibold">
                                        <span class="mr-2">üéØ</span>
                                        <span>+8 points</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div>
                    <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition">
                        <div class="flex items-center mb-6">
                            <div class="text-2xl mr-3">üéÅ</div>
                            <div>
                                <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Your Rewards</h3>
                                <p class="text-snoonu-gray dark:text-gray-400 text-sm">Earn more with better performance</p>
                            </div>
                        </div>

                        <!-- Tier Progress Section -->
                        <div id="tierProgressSection">
                            <!-- Progress Header and Bar will be inserted here by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feedback Tab -->
        <div id="feedback" class="tab-content">
            <!-- AI Sentiment Dashboard -->
            <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition mb-6">
                <div class="flex items-center mb-6">
                    <div class="text-2xl mr-3">üìä</div>
                    <div>
                        <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">AI Sentiment Analysis</h3>
                        <p class="text-snoonu-gray dark:text-gray-400 text-sm">Real-time customer voice intelligence</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Net Sentiment Score -->
                    <div class="text-center">
                        <div class="text-4xl font-black text-snoonu-black dark:text-white mb-2" id="sentimentScore">4.2</div>
                        <div class="text-sm text-snoonu-gray dark:text-gray-400">Net Sentiment Score</div>
                        <div class="flex items-center justify-center mt-1">
                            <span class="text-yellow-500 text-lg">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                        </div>
                    </div>

                    <!-- Trend Indicator -->
                    <div class="text-center">
                        <div class="flex items-center justify-center mb-2">
                            <span id="trendArrow" class="text-2xl mr-2">‚Üò</span>
                            <span id="trendValue" class="text-xl font-bold text-red-500">0.3 pts</span>
                        </div>
                        <div class="text-sm text-snoonu-gray dark:text-gray-400">vs yesterday</div>
                    </div>

                    <!-- AI Insight -->
                    <div class="md:col-span-1">
                        <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4">
                            <div class="text-sm font-bold text-blue-900 dark:text-blue-200 mb-1">ü§ñ AI Insight</div>
                            <div class="text-sm text-blue-800 dark:text-blue-300" id="aiInsight">‚ö†Ô∏è 3 recent complaints detected regarding 'Packaging' - suggested check on thermal bags.</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live Customer Voice Feed -->
            <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition">
                <div class="flex items-center mb-6">
                    <div class="text-2xl mr-3">üí¨</div>
                    <div>
                        <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Live Customer Voice Feed</h3>
                        <p class="text-snoonu-gray dark:text-gray-400 text-sm">Real-time reviews with actionable insights</p>
                    </div>
                </div>

                <!-- Actionable Clusters Container -->
                <div id="feedbackContainer">
                    <!-- Reviews will be dynamically rendered here -->
                </div>
            </div>
        </div>

        <!-- Campaign Tab -->
        <div id="campaign" class="tab-content">
            <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition">
                <div class="flex items-center mb-6">
                    <div class="text-2xl mr-3">üéØ</div>
                    <div>
                        <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Campaign Builder</h3>
                        <p class="text-snoonu-gray dark:text-gray-400 text-sm">AI-powered campaign creation in one click</p>
                    </div>
                </div>

                <div class="text-center py-8">
                    <div class="bg-gradient-to-r from-snoonu-red to-red-600 dark:from-snoonu-dark-red dark:to-red-700 text-white rounded-xl p-8 mb-6">
                        <div class="text-4xl mb-4">ü§ñ</div>
                        <h4 class="text-xl font-bold mb-2">Smart Campaign Generation</h4>
                        <p class="text-red-100">Our AI analyzes your sales data and creates the perfect promotional campaign automatically.</p>
                    </div>

                    <button onclick="generateCampaign()" class="bg-snoonu-red dark:bg-snoonu-dark-red hover:bg-snoonu-darkRed dark:hover:bg-snoonu-dark-darkRed text-white font-bold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 text-lg">
                        ‚ú® Create Smart Campaign
                    </button>
                </div>
            </div>
        </div>

        <!-- Calculator Tab -->
        <div id="calculator" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition">
                    <h3 class="text-lg font-semibold text-snoonu-black dark:text-snoonu-dark-white mb-4">üí∞ Profit Calculator</h3>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-snoonu-black dark:text-snoonu-dark-white mb-1">Item Price ($)</label>
                            <input type="number" value="25" class="w-full px-3 py-2 border border-snoonu-lightGray dark:border-snoonu-dark-lightGray rounded-md bg-white text-gray-900 dark:bg-black/50 dark:text-white" />
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-snoonu-black dark:text-snoonu-dark-white mb-1">Discount (%)</label>
                            <input type="number" value="20" class="w-full px-3 py-2 border border-snoonu-lightGray dark:border-snoonu-dark-lightGray rounded-md bg-white text-gray-900 dark:bg-black/50 dark:text-white" />
                        </div>
                        <button class="w-full bg-snoonu-red dark:bg-snoonu-dark-red text-white py-2 px-4 rounded-md font-medium hover:bg-snoonu-darkRed dark:hover:bg-snoonu-dark-darkRed transition-colors duration-200">
                            Calculate Profit Impact
                        </button>
                    </div>
                </div>

                <div class="bg-white shadow-lg border border-gray-200 dark:bg-black/50 dark:backdrop-blur-md dark:border-red-900/50 dark:shadow-[0_0_15px_rgba(220,38,38,0.15)] rounded-xl p-6 theme-transition">
                    <div class="flex items-center mb-6">
                        <div class="text-2xl mr-3">üìä</div>
                        <div>
                            <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white">Profit Analysis Results</h3>
                            <p class="text-snoonu-gray dark:text-gray-400 text-sm">Smart pricing recommendations</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <div class="text-center p-6 bg-snoonu-lightRed dark:bg-snoonu-dark-lightRed rounded-xl">
                            <div class="text-3xl font-black text-snoonu-red dark:text-snoonu-dark-red">$20.00</div>
                            <div class="text-snoonu-gray dark:text-gray-400 font-medium">Profit Before</div>
                        </div>
                        <div class="text-center p-6 bg-green-50 dark:bg-green-900/20 rounded-xl">
                            <div class="text-3xl font-black text-green-600 dark:text-green-400">$16.00</div>
                            <div class="text-snoonu-gray dark:text-gray-400 font-medium">Profit After</div>
                        </div>
                    </div>

                    <div class="bg-snoonu-lightRed dark:bg-snoonu-dark-lightRed rounded-xl p-4 border border-snoonu-red/20 dark:border-snoonu-dark-red/20">
                        <div class="text-lg font-bold text-snoonu-black dark:text-snoonu-dark-white mb-2">üí° Smart Recommendation</div>
                        <div class="text-snoonu-red dark:text-snoonu-dark-red font-bold text-xl">üìà Volume-Maximizing Strategy</div>
                        <div class="text-snoonu-gray dark:text-gray-400 text-sm mt-1">Drive more sales volume - quantity drives profits</div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    </div>

        <!-- ScoreLab Simulator Modal -->
        <div id="simulatorModal" class="fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 hidden flex items-center justify-center z-50 p-4">
            <div class="bg-white dark:bg-snoonu-dark-darkGray rounded-xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-hidden theme-transition">
                <div class="bg-snoonu-red dark:bg-snoonu-dark-red text-white p-6">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="text-2xl">üß™</div>
                            <div>
                                <h2 class="text-xl font-bold">ScoreLab Simulator</h2>
                                <p class="text-red-100 text-sm">AI-powered decision cockpit - Measure ‚Üí Plan ‚Üí Predict ‚Üí Act</p>
                            </div>
                        </div>
                        <button onclick="closeSimulator()" class="text-white hover:bg-red-700 dark:hover:bg-red-800 rounded-full p-2 transition-colors">‚úï</button>
                    </div>
                </div>

                <div class="p-6 overflow-y-auto max-h-[calc(95vh-200px)]">
                    <!-- AI Coach Section -->
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 mb-8 border border-blue-200 dark:border-blue-700">
                        <div class="flex items-center mb-4">
                            <div class="text-2xl mr-3">ü§ñ</div>
                            <div>
                                <h3 class="text-lg font-bold text-blue-900 dark:text-blue-200">AI Coach Analysis</h3>
                                <p class="text-blue-700 dark:text-blue-300 text-sm">Why your score is 58 and what to fix</p>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="bg-white dark:bg-blue-900/30 rounded-lg p-4 border-l-4 border-red-500">
                                <div class="font-semibold text-red-800 dark:text-red-300">Stockout Issues (-12 points)</div>
                                <div class="text-red-700 dark:text-red-400 text-sm mt-1">High "item unavailable" cancellations hurting reliability</div>
                            </div>
                            <div class="bg-white dark:bg-blue-900/30 rounded-lg p-4 border-l-4 border-orange-500">
                                <div class="font-semibold text-orange-800 dark:text-orange-300">Response Speed (-8 points)</div>
                                <div class="text-orange-700 dark:text-orange-400 text-sm mt-1">"Vendor not reachable" complaints increasing</div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Levers Section -->
                        <div>
                            <h3 class="text-lg font-bold text-snoonu-black dark:text-snoonu-dark-white mb-4">üéõÔ∏è Business Levers</h3>
                            <div class="space-y-4">
                                <div class="bg-snoonu-lightRed dark:bg-snoonu-dark-lightRed rounded-xl p-4 border border-snoonu-red/20 dark:border-snoonu-dark-red/20">
                                    <div class="flex items-center justify-between mb-2">
                                        <label class="font-medium text-snoonu-black dark:text-snoonu-dark-white"><span id="timeMetricIcon" class="dark:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]">‚è±Ô∏è</span> <span id="timeMetricLabel">Prep Time</span></label>
                                        <span class="text-snoonu-red dark:text-snoonu-dark-red font-bold" id="prepTimeValue">25 min</span>
                                    </div>
                                    <input type="range" id="prepTimeSlider" min="5" max="45" value="25" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-snoonu-red" oninput="updateSimulation()" />
                                    <div class="flex justify-between text-xs text-snoonu-gray dark:text-gray-400 mt-1">
                                        <span>5 min (Fast)</span>
                                        <span>45 min (Reliable)</span>
                                    </div>
                                </div>

                                <div class="bg-snoonu-lightRed dark:bg-snoonu-dark-lightRed rounded-xl p-4 border border-snoonu-red/20 dark:border-snoonu-dark-red/20">
                                    <div class="flex items-center justify-between mb-2">
                                        <label class="font-medium text-snoonu-black dark:text-snoonu-dark-white"><span id="stockoutMetricIcon" class="dark:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]">üì¶</span> <span id="stockoutMetricLabel">Stockout Rate</span></label>
                                        <span class="text-snoonu-red dark:text-snoonu-dark-red font-bold" id="stockoutValue">15%</span>
                                    </div>
                                    <input type="range" id="stockoutSlider" min="0" max="40" value="15" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-snoonu-red" oninput="updateSimulation()" />
                                    <div class="flex justify-between text-xs text-snoonu-gray dark:text-gray-400 mt-1">
                                        <span>0% (Perfect)</span>
                                        <span>40% (Problematic)</span>
                                    </div>
                                </div>

                                <div class="bg-snoonu-lightRed dark:bg-snoonu-dark-lightRed rounded-xl p-4 border border-snoonu-red/20 dark:border-snoonu-dark-red/20">
                                    <div class="flex items-center justify-between mb-2">
                                        <label class="font-medium text-snoonu-black dark:text-snoonu-dark-white"><span id="responseMetricIcon" class="dark:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]">üí¨</span> <span id="responseMetricLabel">Response Time</span></label>
                                        <span class="text-snoonu-red dark:text-snoonu-dark-red font-bold" id="responseValue">8 min</span>
                                    </div>
                                    <input type="range" id="responseSlider" min="1" max="30" value="8" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-snoonu-red" oninput="updateSimulation()" />
                                    <div class="flex justify-between text-xs text-snoonu-gray dark:text-gray-400 mt-1">
                                        <span>1 min (Instant)</span>
                                        <span>30 min (Slow)</span>
                                    </div>
                                </div>

                                <div class="bg-snoonu-lightRed dark:bg-snoonu-dark-lightRed rounded-xl p-4 border border-snoonu-red/20 dark:border-snoonu-dark-red/20">
                                    <div class="flex items-center justify-between mb-2">
                                        <label class="font-medium text-snoonu-black dark:text-snoonu-dark-white"><span id="ratingMetricIcon" class="dark:drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]">‚≠ê</span> <span id="ratingMetricLabel">Customer Rating</span></label>
                                        <span class="text-snoonu-red dark:text-snoonu-dark-red font-bold" id="ratingValue">3.8/5</span>
                                    </div>
                                    <input type="range" id="ratingSlider" min="1" max="5" step="0.1" value="3.8" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-snoonu-red" oninput="updateSimulation()" />
                                    <div class="flex justify-between text-xs text-snoonu-gray dark:text-gray-400 mt-1">
                                        <span>1.0 (Poor)</span>
                                        <span>5.0 (Excellent)</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Results Section -->
                        <div>
                            <h3 class="text-lg font-bold text-snoonu-black dark:text-snoonu-dark-white mb-4">üìä Predicted Outcomes</h3>
                            <div class="space-y-4">
                                <div class="bg-gradient-to-r from-snoonu-red to-red-600 dark:from-snoonu-dark-red dark:to-red-700 text-white rounded-xl p-6">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <div class="text-3xl font-black" id="predictedScore">72</div>
                                            <div class="text-red-100 dark:text-red-200">Merchant Score</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-2xl font-bold text-green-300" id="scoreChange">+14 points</div>
                                            <div class="text-red-200 dark:text-red-300 text-sm">vs current 58</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-gradient-to-r from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 text-white rounded-xl p-6">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <div class="text-3xl font-black" id="salesGrowth">+18%</div>
                                            <div class="text-green-100 dark:text-green-200">Sales Growth</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-2xl font-bold text-green-200" id="profitIncrease">+$240/day</div>
                                            <div class="text-green-200 dark:text-green-300 text-sm">est. profit</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-gradient-to-r from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700 text-white rounded-xl p-6">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <div class="text-3xl font-black" id="tierChange">Silver</div>
                                            <div class="text-purple-100 dark:text-purple-200">New Tier</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-2xl font-bold text-yellow-300" id="tierBenefits">+Ad Credits</div>
                                            <div class="text-purple-200 dark:text-purple-300 text-sm">unlocked</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Generate Strategy Button -->
                    <div class="mt-8 text-center">
                        <button onclick="generateStrategies()" id="generateBtn" class="bg-gradient-to-r from-snoonu-red to-red-600 dark:from-snoonu-dark-red dark:to-red-700 hover:from-red-600 hover:to-red-700 dark:hover:from-red-700 dark:hover:to-red-800 text-white font-bold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 animate-pulse">
                            ü§ñ Generate Execution Strategy
                        </button>
                    </div>

                    <!-- AI Recommended Plans (Initially Hidden) -->
                    <div id="plansContainer" class="mt-8 hidden">
                        <h3 class="text-xl font-bold text-snoonu-black dark:text-snoonu-dark-white mb-6">üéØ AI-Generated Execution Strategies</h3>
                        <div id="plansGrid" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-6 border-2 border-green-200 dark:border-green-700 hover:border-green-400 dark:hover:border-green-500 transition-colors cursor-pointer plan-card" data-plan="profit" onclick="selectPlan('profit')">
                                <div class="text-center mb-4">
                                    <div class="text-3xl mb-2">üí∞</div>
                                    <h4 class="font-bold text-green-800 dark:text-green-300">Max Profit</h4>
                                    <p class="text-green-600 dark:text-green-400 text-sm">Optimize for money</p>
                                </div>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-green-700 dark:text-green-400">Score:</span>
                                        <span class="font-bold text-green-800 dark:text-green-300">68 (+10)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-green-700 dark:text-green-400">Profit:</span>
                                        <span class="font-bold text-green-800 dark:text-green-300">+$180/day</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-green-700 dark:text-green-400">Effort:</span>
                                        <span class="font-bold text-green-800 dark:text-green-300">2 hours</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 border-2 border-blue-200 dark:border-blue-700 hover:border-blue-400 dark:hover:border-blue-500 transition-colors cursor-pointer plan-card" data-plan="score" onclick="selectPlan('score')">
                                <div class="text-center mb-4">
                                    <div class="text-3xl mb-2">‚≠ê</div>
                                    <h4 class="font-bold text-blue-800 dark:text-blue-300">Max Score</h4>
                                    <p class="text-blue-600 dark:text-blue-400 text-sm">Optimize for ranking</p>
                                </div>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-blue-700 dark:text-blue-400">Score:</span>
                                        <span class="font-bold text-blue-800 dark:text-blue-300">78 (+20)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-blue-700 dark:text-blue-400">Profit:</span>
                                        <span class="font-bold text-blue-800 dark:text-blue-300">+$120/day</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-blue-700 dark:text-blue-400">Effort:</span>
                                        <span class="font-bold text-blue-800 dark:text-blue-300">4 hours</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border-2 border-purple-200 dark:border-purple-700 hover:border-purple-400 dark:hover:border-purple-500 transition-colors cursor-pointer plan-card" data-plan="balanced" onclick="selectPlan('balanced')">
                                <div class="text-center mb-4">
                                    <div class="text-3xl mb-2">‚öñÔ∏è</div>
                                    <h4 class="font-bold text-purple-800 dark:text-purple-300">Balanced</h4>
                                    <p class="text-purple-600 dark:text-purple-400 text-sm">Best of both worlds</p>
                                </div>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-purple-700 dark:text-purple-400">Score:</span>
                                        <span class="font-bold text-purple-800 dark:text-purple-300">72 (+14)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-purple-700 dark:text-purple-400">Profit:</span>
                                        <span class="font-bold text-purple-800 dark:text-purple-300">+$160/day</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-purple-700 dark:text-purple-400">Effort:</span>
                                        <span class="font-bold text-purple-800 dark:text-purple-300">3 hours</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 flex justify-center">
                            <button onclick="applySelectedPlan()" id="applyPlanBtn" class="bg-snoonu-red dark:bg-snoonu-dark-red hover:bg-snoonu-darkRed dark:hover:bg-snoonu-dark-darkRed text-white font-bold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                üöÄ Apply Selected Strategy
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <script>
        // Tier Data Structure
        const tierData = {
            bronze: {
                name: "Bronze",
                minScore: 0,
                maxScore: 60,
                color: "bronze",
                benefits: ["Standard Commission", "Basic Support"],
                badge: "ü•â"
            },
            silver: {
                name: "Silver",
                minScore: 60,
                maxScore: 80,
                color: "silver",
                benefits: ["Priority Support", "2x Monthly Ad Credits", "Silver Badge"],
                badge: "ü•à"
            },
            gold: {
                name: "Gold",
                minScore: 80,
                maxScore: 95,
                color: "gold",
                benefits: ["Lower Commission (-2%)", "Dedicated Account Manager", "Gold Badge"],
                badge: "ü•á"
            },
            platinum: {
                name: "Platinum",
                minScore: 95,
                maxScore: 100,
                color: "platinum",
                benefits: ["0% Commission on Pickups", "VIP Support Line", "Platinum Badge"],
                badge: "üíé"
            }
        };

        // Customer Feedback Data Engine
        const feedbackData = {
            restaurant: {
                sentiment: {
                    score: 4.2,
                    trend: "down",
                    trendValue: 0.3,
                    insight: "‚ö†Ô∏è 3 recent complaints detected regarding 'Packaging' - suggested check on thermal bags."
                },
                reviews: [
                    { name: "Ahmed K.", rating: 5, comment: "Amazing burgers! Fresh and juicy, definitely coming back!", tag: "Quality", time: "2h ago", sentiment: "positive" },
                    { name: "Fatima R.", rating: 1, comment: "Food arrived cold and fries were soggy. Terrible experience.", tag: "Packaging", time: "4h ago", sentiment: "negative" },
                    { name: "Mohammed S.", rating: 4, comment: "Good food but delivery took 45 minutes. Please improve speed.", tag: "Late", time: "6h ago", sentiment: "neutral" },
                    { name: "Sara A.", rating: 5, comment: "Best burger in the area! Staff was friendly too.", tag: "Service", time: "8h ago", sentiment: "positive" },
                    { name: "Omar B.", rating: 2, comment: "Burger was okay but missing the special sauce I ordered.", tag: "Missing Item", time: "12h ago", sentiment: "negative" },
                    { name: "Layla M.", rating: 5, comment: "Perfect! Exactly what I ordered, hot and fresh.", tag: "Quality", time: "1d ago", sentiment: "positive" },
                    { name: "Khalid H.", rating: 3, comment: "Food was good but packaging leaked all over my car.", tag: "Packaging", time: "1d ago", sentiment: "negative" }
                ]
            },
            mart: {
                sentiment: {
                    score: 4.5,
                    trend: "up",
                    trendValue: 0.2,
                    insight: "üìà Customer satisfaction improving - 'Fresh Produce' category driving positive reviews."
                },
                reviews: [
                    { name: "Nadia L.", rating: 5, comment: "Fresh fruits and vegetables! Love the quality here.", tag: "Quality", time: "1h ago", sentiment: "positive" },
                    { name: "Ibrahim T.", rating: 1, comment: "Milk carton leaked in the bag, made a mess everywhere.", tag: "Packaging", time: "3h ago", sentiment: "negative" },
                    { name: "Aisha R.", rating: 4, comment: "Good selection but couldn't find the brand I wanted.", tag: "Missing Item", time: "5h ago", sentiment: "neutral" },
                    { name: "Youssef M.", rating: 5, comment: "Always fresh dairy products. Very reliable!", tag: "Quality", time: "7h ago", sentiment: "positive" },
                    { name: "Huda S.", rating: 2, comment: "Eggs arrived broken. Need better packaging.", tag: "Packaging", time: "10h ago", sentiment: "negative" },
                    { name: "Zahra K.", rating: 5, comment: "Excellent customer service and fresh produce.", tag: "Service", time: "1d ago", sentiment: "positive" }
                ]
            },
            laundry: {
                sentiment: {
                    score: 4.6,
                    trend: "stable",
                    trendValue: 0,
                    insight: "‚ú® Strong performance in 'Premium Service' - consider expanding dry cleaning capacity."
                },
                reviews: [
                    { name: "Mariam A.", rating: 5, comment: "Perfect pressing! My suit looks brand new.", tag: "Quality", time: "30m ago", sentiment: "positive" },
                    { name: "Hassan N.", rating: 2, comment: "Button missing from my shirt after pickup.", tag: "Damage", time: "2h ago", sentiment: "negative" },
                    { name: "Lina W.", rating: 5, comment: "Always reliable and clothes come back smelling great!", tag: "Service", time: "4h ago", sentiment: "positive" },
                    { name: "Omar Z.", rating: 4, comment: "Good service but took longer than expected.", tag: "Late", time: "6h ago", sentiment: "neutral" },
                    { name: "Reem B.", rating: 1, comment: "Stain not removed from my favorite blouse. Very disappointed.", tag: "Quality", time: "8h ago", sentiment: "negative" },
                    { name: "Salem K.", rating: 5, comment: "Exceptional dry cleaning service. Highly recommend!", tag: "Quality", time: "1d ago", sentiment: "positive" }
                ]
            },
            pharmacy: {
                sentiment: {
                    score: 4.8,
                    trend: "up",
                    trendValue: 0.1,
                    insight: "üíä Excellent prescription accuracy - 'Fast Service' driving customer loyalty."
                },
                reviews: [
                    { name: "Noor F.", rating: 5, comment: "Always accurate prescriptions and friendly staff!", tag: "Service", time: "1h ago", sentiment: "positive" },
                    { name: "Abdullah R.", rating: 5, comment: "Quick service during flu season. Much appreciated!", tag: "Speed", time: "2h ago", sentiment: "positive" },
                    { name: "Maya S.", rating: 4, comment: "Good selection but had to wait 15 minutes.", tag: "Wait Time", time: "4h ago", sentiment: "neutral" },
                    { name: "Tariq M.", rating: 5, comment: "Professional service and all medications ready on time.", tag: "Quality", time: "6h ago", sentiment: "positive" },
                    { name: "Dana H.", rating: 3, comment: "Couldn't find the cough syrup I needed.", tag: "Missing Item", time: "8h ago", sentiment: "negative" },
                    { name: "Faisal A.", rating: 5, comment: "Best pharmacy in the area. Always helpful staff.", tag: "Service", time: "1d ago", sentiment: "positive" }
                ]
            }
        };

        // Vertical Configuration Engine
        const verticalConfig = {
            restaurant: {
                name: "Burger House",
                icon: "üçî",
                category: "restaurants",
                edition: "RESTAURANT EDITION",
                timeMetricLabel: "Prep Time",
                loadMetricLabel: "Kitchen Load",
                aiAction: "üöÄ Update burger prep time to 25 min during lunch rush",
                aiActionDesc: "Our signature burgers need more prep time during peak lunch hours",
                tickerMessage: "Hungry customers nearby - surge in burger orders",
                simulatorMetrics: {
                    timeMetric: "Prep Time",
                    stockoutMetric: "Stockout Rate",
                    responseMetric: "Response Time",
                    ratingMetric: "Customer Rating"
                },
                metrics: [
                    { label: "Availability", value: "75%", trend: "stable", color: "gray" },
                    { label: "Reliability", value: "65%", trend: "down", color: "red" },
                    { label: "Conversion", value: "22%", trend: "down", subtext: "-2%", color: "red" },
                    { label: "Prep Delay", value: "+4m", trend: "up", subtext: "Late", color: "red" },
                    { label: "Sentiment", value: "4.2‚òÖ", trend: "up", subtext: "Top 10%", color: "green" }
                ],
                tasks: [
                    {
                        title: "Update prep time to 25 min (Lunch Rush detected)",
                        points: 8,
                        type: "urgent",
                        icon: "‚è±Ô∏è"
                    },
                    {
                        title: "Accept 'Scheduled Order #482' for tomorrow",
                        points: 2,
                        type: "quick",
                        icon: "üìÖ"
                    },
                    {
                        title: "Upload photo for 'Spicy Burger' (Missing image)",
                        points: 5,
                        type: "quick",
                        icon: "üì∏"
                    }
                ]
            },
            mart: {
                name: "Al Madina Mart",
                icon: "üõí",
                category: "grocery stores",
                edition: "MART EDITION",
                timeMetricLabel: "Picking Time",
                loadMetricLabel: "Store Load",
                aiAction: "üì¶ Mark 'Al Marai Milk' as Low Stock (predicted run-out in 1 hour)",
                aiActionDesc: "Critical dairy item running low - reorder needed immediately",
                tickerMessage: "High demand for 'Dairy' in West Bay - stock up!",
                simulatorMetrics: {
                    timeMetric: "Picking Speed",
                    stockoutMetric: "Stockout Rate",
                    responseMetric: "Response Time",
                    ratingMetric: "Customer Rating"
                },
                metrics: [
                    { label: "Availability", value: "82%", trend: "up", color: "green" },
                    { label: "Reliability", value: "78%", trend: "up", color: "green" },
                    { label: "Conversion", value: "28%", trend: "up", subtext: "+3%", color: "green" },
                    { label: "Pick Rate", value: "12/min", trend: "up", subtext: "Items/min", color: "green" },
                    { label: "Sentiment", value: "4.5‚òÖ", trend: "up", subtext: "Top 5%", color: "green" }
                ],
                tasks: [
                    {
                        title: "Mark 'Al Marai Milk' Low Stock (Predicted run-out: 1h)",
                        points: 8,
                        type: "urgent",
                        icon: "ü•õ"
                    },
                    {
                        title: "Verify expiry dates for Batch #902 (Dairy)",
                        points: 5,
                        type: "routine",
                        icon: "üìÖ"
                    },
                    {
                        title: "Approve substitute for 'Organic Eggs' (Out of Stock)",
                        points: 3,
                        type: "quick",
                        icon: "ü•ö"
                    }
                ]
            },
            laundry: {
                name: "Fresh Clean Laundry",
                icon: "üëî",
                category: "laundry services",
                edition: "LAUNDRY EDITION",
                timeMetricLabel: "Turnaround Time",
                loadMetricLabel: "Capacity Load",
                aiAction: "‚è∞ Extend turnaround time to 48h due to high volume",
                aiActionDesc: "Surge in dry cleaning orders - adjust customer expectations",
                tickerMessage: "Surge in Dry Cleaning orders - capacity at 95%",
                simulatorMetrics: {
                    timeMetric: "Cleaning Speed",
                    stockoutMetric: "Capacity Issues",
                    responseMetric: "Response Time",
                    ratingMetric: "Customer Rating"
                },
                metrics: [
                    { label: "Availability", value: "91%", trend: "up", color: "green" },
                    { label: "Reliability", value: "85%", trend: "up", color: "green" },
                    { label: "Conversion", value: "35%", trend: "up", subtext: "+5%", color: "green" },
                    { label: "Turnaround", value: "24h", trend: "down", subtext: "Avg", color: "red" },
                    { label: "Sentiment", value: "4.6‚òÖ", trend: "up", subtext: "Top 3%", color: "green" }
                ],
                tasks: [
                    {
                        title: "Extend turnaround time to 48h (High Volume)",
                        points: 10,
                        type: "urgent",
                        icon: "‚è∞"
                    },
                    {
                        title: "Confirm pickup for 'Premium Suit Service'",
                        points: 4,
                        type: "quick",
                        icon: "üëî"
                    }
                ]
            },
            pharmacy: {
                name: "HealthCare Pharmacy",
                icon: "üíä",
                category: "pharmacies",
                edition: "PHARMACY EDITION",
                timeMetricLabel: "Verification Time",
                loadMetricLabel: "Prescription Load",
                aiAction: "üè• Fast-track prescription verification for flu medications",
                aiActionDesc: "Flu season demand spike - prioritize urgent prescriptions",
                tickerMessage: "Flu season demand spike - stock up on medications",
                simulatorMetrics: {
                    timeMetric: "Verification Speed",
                    stockoutMetric: "Medication Stockout",
                    responseMetric: "Response Time",
                    ratingMetric: "Customer Rating"
                },
                metrics: [
                    { label: "Availability", value: "95%", trend: "up", color: "green" },
                    { label: "Reliability", value: "92%", trend: "up", color: "green" },
                    { label: "Conversion", value: "42%", trend: "up", subtext: "+8%", color: "green" },
                    { label: "Wait Time", value: "8m", trend: "down", subtext: "Avg", color: "red" },
                    { label: "Sentiment", value: "4.8‚òÖ", trend: "up", subtext: "Top 1%", color: "green" }
                ],
                tasks: [
                    {
                        title: "Verify Prescription #882 (Pending > 10m)",
                        points: 15,
                        type: "urgent",
                        icon: "üè•"
                    },
                    {
                        title: "Restock 'Panadol Advance' (High Demand)",
                        points: 5,
                        type: "routine",
                        icon: "üíä"
                    }
                ]
            }
        };

        let currentVertical = 'restaurant';

        // Tier Progress Ladder Rendering
        function renderTierProgress() {
            const currentScore = 58; // This should ideally come from the actual score
            let currentTier = null;
            let nextTier = null;
            let progressToNext = 0;

            // Determine current tier and next tier
            for (const [tierKey, tier] of Object.entries(tierData)) {
                if (currentScore >= tier.minScore && currentScore < tier.maxScore) {
                    currentTier = { ...tier, key: tierKey };
                    // Find next tier
                    const tierKeys = Object.keys(tierData);
                    const currentIndex = tierKeys.indexOf(tierKey);
                    if (currentIndex < tierKeys.length - 1) {
                        nextTier = { ...tierData[tierKeys[currentIndex + 1]], key: tierKeys[currentIndex + 1] };
                        const progressRange = nextTier.minScore - tier.minScore;
                        const progressMade = currentScore - tier.minScore;
                        progressToNext = Math.min(100, (progressMade / progressRange) * 100);
                    }
                    break;
                }
            }

            // Generate HTML
            let html = '';

            // Progress Header
            if (nextTier) {
                const pointsNeeded = nextTier.minScore - currentScore;
                html += `
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-snoonu-gray dark:text-gray-400">Next Tier: ${nextTier.name}</span>
                            <span class="text-sm font-bold text-snoonu-red dark:text-red-400">${pointsNeeded} points away</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                            <div class="bg-snoonu-red dark:bg-red-500 h-2 rounded-full transition-all duration-300" style="width: ${progressToNext}%"></div>
                        </div>
                        <div class="flex justify-between text-xs text-snoonu-gray dark:text-gray-400 mt-1">
                            <span>${currentTier.name} (${currentTier.minScore})</span>
                            <span>${nextTier.name} (${nextTier.minScore})</span>
                        </div>
                    </div>
                `;
            }

            // Tier Ladder
            html += '<div class="space-y-3">';

            for (const [tierKey, tier] of Object.entries(tierData)) {
                const isCurrentTier = currentTier && tierKey === currentTier.key;
                const isLocked = !isCurrentTier && (!currentTier || tier.minScore > currentScore);

                let tierClasses = 'border-2 rounded-xl p-4 transition-all duration-300 ';
                let tierContentClasses = '';

                if (isCurrentTier) {
                    // Current tier - highlighted and glowing
                    tierClasses += 'border-snoonu-red dark:border-red-500 bg-snoonu-lightRed/50 dark:bg-red-900/20 dark:shadow-[0_0_10px_rgba(220,38,38,0.3)]';
                    tierContentClasses = 'opacity-100';
                } else if (isLocked) {
                    // Locked tier - dimmed
                    tierClasses += 'border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50 opacity-60 dark:opacity-40';
                    tierContentClasses = 'opacity-75';
                } else {
                    // Unlocked higher tier
                    tierClasses += 'border-green-300 dark:border-green-600 bg-green-50 dark:bg-green-900/20';
                    tierContentClasses = 'opacity-100';
                }

                html += `
                    <div class="${tierClasses}">
                        <div class="flex items-center justify-between mb-3 ${tierContentClasses}">
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">${tier.badge}</span>
                                <div>
                                    <h4 class="font-bold text-snoonu-black dark:text-snoonu-dark-white">${tier.name} Tier</h4>
                                    <span class="text-xs text-snoonu-gray dark:text-gray-400">${tier.minScore}-${tier.maxScore} points</span>
                                </div>
                            </div>
                            ${isCurrentTier ? '<span class="px-2 py-1 bg-snoonu-red text-white text-xs font-bold rounded-full">CURRENT</span>' : ''}
                            ${isLocked ? '<span class="text-gray-400 dark:text-gray-500">üîí</span>' : ''}
                        </div>
                        <ul class="space-y-1 ${tierContentClasses}">
                            ${tier.benefits.map(benefit =>
                                `<li class="text-sm flex items-center ${isCurrentTier ? 'text-snoonu-gray dark:text-gray-400' : 'text-snoonu-gray dark:text-gray-500'}">
                                    <span class="mr-2 ${isCurrentTier ? 'text-green-600 dark:text-green-400' : 'text-gray-400'}">${isCurrentTier ? '‚úì' : '‚óã'}</span>
                                    ${benefit}
                                </li>`
                            ).join('')}
                        </ul>
                    </div>
                `;

                // Add teaser for next tier (Silver)
                if (tierKey === 'silver' && isLocked && currentTier && currentTier.key === 'bronze') {
                    html += `
                        <div class="bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-200 dark:border-yellow-700/50 rounded-lg p-3 mt-2">
                            <p class="text-sm text-yellow-800 dark:text-yellow-200 font-medium">
                                üéØ Unlock Priority Support & Ad Credits by reaching 60 points!
                            </p>
                        </div>
                    `;
                }
            }

            html += '</div>';

            document.getElementById('tierProgressSection').innerHTML = html;
        }

        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const sunIcon = document.getElementById('sunIcon');
        const moonIcon = document.getElementById('moonIcon');
        const html = document.documentElement;

        // Load saved theme
        const savedTheme = localStorage.getItem('snoonu-theme') || 'light';
        if (savedTheme === 'dark') {
            html.classList.add('dark');
            sunIcon.classList.add('hidden');
            moonIcon.classList.remove('hidden');
        }

        themeToggle.addEventListener('click', () => {
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                localStorage.setItem('snoonu-theme', 'light');
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            } else {
                html.classList.add('dark');
                localStorage.setItem('snoonu-theme', 'dark');
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            }
        });

        // Vertical Switcher Functionality
        const verticalSwitcher = document.getElementById('verticalSwitcher');

        function updateDashboardVertical(vertical) {
            const config = verticalConfig[vertical];
            if (!config) return;

            currentVertical = vertical;

            // Update merchant information
            document.getElementById('merchantName').textContent = config.name;
            document.getElementById('merchantIcon').textContent = config.icon;
            document.getElementById('merchantCategory').textContent = config.category;
            document.getElementById('editionLabel').textContent = config.edition;

            // Update metrics
            renderMetrics(currentVertical);

            // Update AI action
            document.getElementById('aiActionTitle').textContent = config.aiAction;
            document.getElementById('aiActionDesc').textContent = config.aiActionDesc;

            // Update ticker message
            document.getElementById('tickerMessage').innerHTML = `üì¢ ${config.tickerMessage}`;

            // Update tier progress (in case tiers differ by vertical in future)
            renderTierProgress();

            // Update feedback tab content
            updateFeedbackTab(currentVertical);

            // Update simulator metrics
            document.getElementById('timeMetricIcon').textContent = '‚è±Ô∏è';
            document.getElementById('timeMetricLabel').textContent = config.simulatorMetrics.timeMetric;
            document.getElementById('stockoutMetricIcon').textContent = 'üì¶';
            document.getElementById('stockoutMetricLabel').textContent = config.simulatorMetrics.stockoutMetric;
            document.getElementById('responseMetricIcon').textContent = 'üí¨';
            document.getElementById('responseMetricLabel').textContent = config.simulatorMetrics.responseMetric;
            document.getElementById('ratingMetricIcon').textContent = '‚≠ê';
            document.getElementById('ratingMetricLabel').textContent = config.simulatorMetrics.ratingMetric;

            // Save vertical preference
            localStorage.setItem('snoonu-vertical', vertical);
        }

        // Load saved vertical
        const savedVertical = localStorage.getItem('snoonu-vertical') || 'restaurant';
        verticalSwitcher.value = savedVertical;
        updateDashboardVertical(savedVertical);

        verticalSwitcher.addEventListener('change', (e) => {
            updateDashboardVertical(e.target.value);
        });

        // Tab switching
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-white', 'text-snoonu-red');
                btn.classList.add('text-white', 'hover:bg-white/20');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');

            // Highlight selected button
            event.target.classList.remove('text-white', 'hover:bg-white/20');
            event.target.classList.add('bg-white', 'text-snoonu-red');
        }

        // Simulator modal
        // ScoreLab Simulator Modal
        let selectedPlan = null;

        function openSimulator() {
            document.getElementById('simulatorModal').classList.remove('hidden');
            document.getElementById('simulatorModal').classList.add('flex');
            updateSimulation(); // Initialize with current values
        }

        function closeSimulator() {
            document.getElementById('simulatorModal').classList.add('hidden');
            document.getElementById('simulatorModal').classList.remove('flex');
            selectedPlan = null;
            document.getElementById('applyPlanBtn').disabled = true;
            // Reset plan selection visual
            document.querySelectorAll('.plan-card').forEach(card => {
                card.classList.remove('ring-4', 'ring-snoonu-red', 'dark:ring-snoonu-dark-red');
            });
        }

        function updateSimulation() {
            // Get current slider values
            const prepTime = parseInt(document.getElementById('prepTimeSlider').value);
            const stockoutRate = parseInt(document.getElementById('stockoutSlider').value);
            const responseTime = parseInt(document.getElementById('responseSlider').value);
            const rating = parseFloat(document.getElementById('ratingSlider').value);

            // Update display values
            document.getElementById('prepTimeValue').textContent = `${prepTime} min`;
            document.getElementById('stockoutValue').textContent = `${stockoutRate}%`;
            document.getElementById('responseValue').textContent = `${responseTime} min`;
            document.getElementById('ratingValue').textContent = `${rating.toFixed(1)}/5`;

            // Calculate new score (simplified model)
            const currentScore = 58;
            let scoreChange = 0;

            // Prep time impact (higher prep time = better reliability = higher score)
            if (prepTime > 25) scoreChange += Math.min(8, (prepTime - 25) * 0.4);
            else if (prepTime < 15) scoreChange -= (15 - prepTime) * 0.5;

            // Stockout impact (lower stockouts = higher score)
            scoreChange += (15 - stockoutRate) * 0.8;

            // Response time impact (faster response = higher score)
            if (responseTime < 5) scoreChange += (5 - responseTime) * 0.6;
            else if (responseTime > 10) scoreChange -= (responseTime - 10) * 0.4;

            // Rating impact
            scoreChange += (rating - 3.8) * 3;

            const newScore = Math.max(0, Math.min(100, currentScore + scoreChange));
            const salesGrowth = Math.max(-30, Math.min(40, scoreChange * 1.2 + (rating - 3.8) * 8));
            const profitIncrease = Math.round(salesGrowth * 13.5); // Average order value impact

            // Update display
            document.getElementById('predictedScore').textContent = Math.round(newScore);
            document.getElementById('scoreChange').textContent = `${scoreChange > 0 ? '+' : ''}${Math.round(scoreChange)} points`;
            document.getElementById('salesGrowth').textContent = `${salesGrowth > 0 ? '+' : ''}${Math.round(salesGrowth)}%`;
            document.getElementById('profitIncrease').textContent = `${profitIncrease > 0 ? '+' : ''}$${Math.abs(profitIncrease)}/day`;

            // Update tier
            let tier = 'Bronze';
            let benefits = 'Basic';
            if (newScore >= 80) {
                tier = 'Gold';
                benefits = '+Lower Commission';
            } else if (newScore >= 65) {
                tier = 'Silver';
                benefits = '+Ad Credits';
            }

            document.getElementById('tierChange').textContent = tier;
            document.getElementById('tierBenefits').textContent = benefits;

            // Add pulsing effect to generate button to indicate new strategies are available
            const generateBtn = document.getElementById('generateBtn');
            generateBtn.classList.add('animate-pulse');
        }

        function selectPlan(planType) {
            selectedPlan = planType;

            // Remove selection from all cards
            document.querySelectorAll('.plan-card').forEach(card => {
                card.classList.remove('ring-4', 'ring-snoonu-red', 'dark:ring-snoonu-dark-red');
            });

            // Add selection to clicked card
            const selectedCard = document.querySelector(`[data-plan="${planType}"]`);
            selectedCard.classList.add('ring-4', 'ring-snoonu-red', 'dark:ring-snoonu-dark-red');

            // Enable apply button
            document.getElementById('applyPlanBtn').disabled = false;

            // Auto-adjust sliders based on plan
            switch(planType) {
                case 'profit':
                    // Focus on rating and moderate improvements
                    document.getElementById('ratingSlider').value = '4.5';
                    document.getElementById('stockoutSlider').value = '8';
                    document.getElementById('prepTimeSlider').value = '20';
                    document.getElementById('responseSlider').value = '3';
                    break;
                case 'score':
                    // Maximize all improvements
                    document.getElementById('ratingSlider').value = '4.8';
                    document.getElementById('stockoutSlider').value = '2';
                    document.getElementById('prepTimeSlider').value = '35';
                    document.getElementById('responseSlider').value = '2';
                    break;
                case 'balanced':
                    // Moderate improvements across all areas
                    document.getElementById('ratingSlider').value = '4.2';
                    document.getElementById('stockoutSlider').value = '6';
                    document.getElementById('prepTimeSlider').value = '28';
                    document.getElementById('responseSlider').value = '4';
                    break;
            }

            updateSimulation();
        }

        function applySelectedPlan() {
            if (!selectedPlan) return;

            // Get current slider values
            const prepTime = parseInt(document.getElementById('prepTimeSlider').value);
            const stockoutRate = parseInt(document.getElementById('stockoutSlider').value);
            const rating = parseFloat(document.getElementById('ratingSlider').value);

            // Get strategy name
            let strategyName = '';
            switch(selectedPlan) {
                case 'aggressive':
                    strategyName = 'Aggressive Rollout';
                    break;
                case 'optimization':
                    strategyName = 'Process Optimization';
                    break;
                case 'tech':
                    strategyName = 'Tech-First Approach';
                    break;
            }

            alert(`üéØ Strategy Locked: Targeting ${prepTime}min prep time, ${stockoutRate}% stockout, ${rating.toFixed(1)} rating via ${strategyName}.\n\nTasks added to Dashboard:\n‚Ä¢ Implementation timeline: 1-2 weeks\n‚Ä¢ Expected score improvement: +8-15 points\n‚Ä¢ Budget impact: Calculated based on strategy\n‚Ä¢ Success metrics: Monitored automatically`);

            closeSimulator();
        }

        // Strategy Generation
        function generateStrategies() {
            // Get current slider values
            const prepTime = parseInt(document.getElementById('prepTimeSlider').value);
            const stockoutRate = parseInt(document.getElementById('stockoutSlider').value);
            const rating = parseFloat(document.getElementById('ratingSlider').value);

            // Generate dynamic strategies based on current values
            const strategies = [
                {
                    id: 'aggressive',
                    name: 'Aggressive Rollout',
                    icon: '‚ö°',
                    description: `Achieve ${stockoutRate - 2}% stockout in 1 week by hiring 1 extra packer`,
                    gradient: 'from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20',
                    border: 'border-red-200 dark:border-red-700',
                    hoverBorder: 'hover:border-red-400 dark:hover:border-red-500',
                    textColor: 'text-red-800 dark:text-red-300',
                    subTextColor: 'text-red-600 dark:text-red-400'
                },
                {
                    id: 'optimization',
                    name: 'Process Optimization',
                    icon: 'üîß',
                    description: `Reach ${rating.toFixed(1)} rating by retraining staff on packing SOPs`,
                    gradient: 'from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20',
                    border: 'border-blue-200 dark:border-blue-700',
                    hoverBorder: 'hover:border-blue-400 dark:hover:border-blue-500',
                    textColor: 'text-blue-800 dark:text-blue-300',
                    subTextColor: 'text-blue-600 dark:text-blue-400'
                },
                {
                    id: 'tech',
                    name: 'Tech-First Approach',
                    icon: 'ü§ñ',
                    description: `Reduce prep time to ${prepTime}m using auto-accept rules`,
                    gradient: 'from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20',
                    border: 'border-green-200 dark:border-green-700',
                    hoverBorder: 'hover:border-green-400 dark:hover:border-green-500',
                    textColor: 'text-green-800 dark:text-green-300',
                    subTextColor: 'text-green-600 dark:text-green-400'
                }
            ];

            // Generate HTML for strategy cards
            const plansGrid = document.getElementById('plansGrid');
            plansGrid.innerHTML = '';

            strategies.forEach(strategy => {
                const cardHTML = `
                    <div class="bg-gradient-to-br ${strategy.gradient} rounded-xl p-6 border-2 ${strategy.border} ${strategy.hoverBorder} transition-colors cursor-pointer plan-card" data-plan="${strategy.id}" onclick="selectPlan('${strategy.id}')">
                        <div class="text-center mb-4">
                            <div class="text-3xl mb-2">${strategy.icon}</div>
                            <h4 class="font-bold ${strategy.textColor}">${strategy.name}</h4>
                            <p class="${strategy.subTextColor} text-sm">${strategy.description}</p>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="${strategy.subTextColor}">Target Prep Time:</span>
                                <span class="font-bold ${strategy.textColor}">${prepTime} min</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="${strategy.subTextColor}">Target Stockout:</span>
                                <span class="font-bold ${strategy.textColor}">${stockoutRate}%</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="${strategy.subTextColor}">Target Rating:</span>
                                <span class="font-bold ${strategy.textColor}">${rating.toFixed(1)}/5</span>
                            </div>
                        </div>
                    </div>
                `;
                plansGrid.innerHTML += cardHTML;
            });

            // Show the plans container
            document.getElementById('plansContainer').classList.remove('hidden');

            // Stop pulsing animation on generate button
            document.getElementById('generateBtn').classList.remove('animate-pulse');
        }

        // Campaign generation
        function generateCampaign() {
            alert('üéâ Campaign generated!\n\n"üöÄ Lunch Rush Special: 20% Off Your Favorites!"\n\nExpected impact: +25% orders during lunch hours\n+15% revenue increase');
        }

        // Render Sentiment Dashboard
        function renderSentimentDashboard(vertical) {
            const sentiment = feedbackData[vertical].sentiment;

            document.getElementById('sentimentScore').textContent = sentiment.score;
            document.getElementById('trendArrow').textContent = sentiment.trend === 'up' ? '‚Üó' : sentiment.trend === 'down' ? '‚Üò' : '‚Üí';
            document.getElementById('trendValue').textContent = sentiment.trendValue === 0 ? 'Stable' : `${sentiment.trendValue} pts`;
            document.getElementById('trendValue').className = `text-xl font-bold ${sentiment.trend === 'up' ? 'text-green-500' : sentiment.trend === 'down' ? 'text-red-500' : 'text-gray-500'}`;
            document.getElementById('aiInsight').textContent = sentiment.insight;
        }

        // Render Feedback Reviews
        function renderFeedbackReviews(vertical) {
            const reviews = feedbackData[vertical].reviews;
            const container = document.getElementById('feedbackContainer');

            // Analyze reviews for actionable insights
            const tagCounts = {};
            reviews.forEach(review => {
                tagCounts[review.tag] = (tagCounts[review.tag] || 0) + 1;
            });

            // Find the most problematic tag
            const topIssueTag = Object.keys(tagCounts).reduce((a, b) => tagCounts[a] > tagCounts[b] ? a : b);

            // Generate suggested task based on top issue
            let suggestedTask = '';
            let taskIcon = 'üö®';
            switch(topIssueTag) {
                case 'Packaging':
                    suggestedTask = 'Improve packaging quality - multiple customers reporting damaged/leaked items';
                    taskIcon = 'üì¶';
                    break;
                case 'Late':
                    suggestedTask = 'Speed up delivery times - customers complaining about delays';
                    taskIcon = '‚è±Ô∏è';
                    break;
                case 'Missing Item':
                    suggestedTask = 'Double-check orders before dispatch - items missing from deliveries';
                    taskIcon = 'üîç';
                    break;
                case 'Quality':
                    suggestedTask = 'Review product quality standards - mixed feedback on food quality';
                    taskIcon = '‚≠ê';
                    break;
                case 'Service':
                    suggestedTask = 'Staff training on customer service - improve interaction quality';
                    taskIcon = 'üë•';
                    break;
                default:
                    suggestedTask = 'Monitor customer feedback trends and address top concerns';
                    taskIcon = 'üìä';
            }

            // Group reviews by sentiment
            const positiveReviews = reviews.filter(r => r.sentiment === 'positive').slice(0, 3);
            const negativeReviews = reviews.filter(r => r.sentiment === 'negative').slice(0, 3);

            let html = '';

            // Attention Needed Section
            if (negativeReviews.length > 0) {
                html += `
                    <div class="mb-6">
                        <h4 class="text-lg font-bold text-red-600 dark:text-red-400 mb-3 flex items-center">
                            <span class="mr-2">üö®</span> Attention Needed (${negativeReviews.length})
                        </h4>
                        <div class="space-y-3 max-h-[300px] overflow-y-auto">
                            ${negativeReviews.map(review => `
                                <div class="border-2 border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/10 rounded-lg p-4">
                                    <div class="flex items-start justify-between mb-2">
                                        <div class="flex items-center space-x-2">
                                            <span class="font-bold text-snoonu-black dark:text-white">${review.name}</span>
                                            <span class="text-yellow-500">${'‚≠ê'.repeat(review.rating)}${'‚òÜ'.repeat(5-review.rating)}</span>
                                            <span class="px-2 py-1 bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-200 text-xs rounded-full">${review.tag}</span>
                                        </div>
                                        <span class="text-xs text-snoonu-gray dark:text-gray-400">${review.time}</span>
                                    </div>
                                    <p class="text-sm text-snoonu-black dark:text-gray-300">${review.comment}</p>
                                </div>
                            `).join('')}
                        </div>

                        <!-- Suggested Task -->
                        <div class="mt-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4">
                            <h5 class="font-bold text-blue-900 dark:text-blue-200 text-sm mb-2 flex items-center">
                                <span class="mr-2">${taskIcon}</span> AI-Suggested Action
                            </h5>
                            <p class="text-blue-800 dark:text-blue-300 text-sm mb-3">${suggestedTask}</p>
                            <button class="bg-snoonu-red hover:bg-snoonu-darkRed text-white px-4 py-2 rounded-lg font-bold text-sm shadow hover:shadow-md transition-all duration-200">
                                Create Task
                            </button>
                        </div>
                    </div>
                `;
            }

            // Recent Praise Section
            if (positiveReviews.length > 0) {
                html += `
                    <div class="mb-6">
                        <h4 class="text-lg font-bold text-green-600 dark:text-green-400 mb-3 flex items-center">
                            <span class="mr-2">üíö</span> Recent Praise (${positiveReviews.length})
                        </h4>
                        <div class="space-y-3 max-h-[200px] overflow-y-auto">
                            ${positiveReviews.map(review => `
                                <div class="border-2 border-green-200 dark:border-green-700 bg-green-50 dark:bg-green-900/10 rounded-lg p-4">
                                    <div class="flex items-start justify-between mb-2">
                                        <div class="flex items-center space-x-2">
                                            <span class="font-bold text-snoonu-black dark:text-white">${review.name}</span>
                                            <span class="text-yellow-500">${'‚≠ê'.repeat(review.rating)}${'‚òÜ'.repeat(5-review.rating)}</span>
                                            <span class="px-2 py-1 bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-200 text-xs rounded-full">${review.tag}</span>
                                        </div>
                                        <span class="text-xs text-snoonu-gray dark:text-gray-400">${review.time}</span>
                                    </div>
                                    <p class="text-sm text-snoonu-black dark:text-gray-300">${review.comment}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        // Render Dynamic Metrics
        function renderMetrics(verticalKey) {
            const metrics = verticalConfig[verticalKey].metrics;
            const container = document.getElementById('metricsContainer');

            container.innerHTML = '';

            metrics.forEach(metric => {
                const trendIcon = metric.trend === 'up' ? '‚Üó' : metric.trend === 'down' ? '‚Üò' : '‚Üí';
                const trendColor = metric.trend === 'up' ? 'text-green-500' : metric.trend === 'down' ? 'text-red-500' : 'text-gray-400';
                const subtextColor = metric.color === 'green' ? 'text-green-600 dark:text-green-400' : metric.color === 'red' ? 'text-red-600 dark:text-red-400' : 'text-gray-600 dark:text-gray-400';

                const html = `
                    <div class="p-3 rounded-xl border border-gray-100 dark:border-white/10 bg-gray-50 dark:bg-white/5 backdrop-blur-sm shadow-sm transition-all hover:scale-105">
                        <div class="text-xs font-medium text-gray-500 dark:text-gray-400 mb-1 flex justify-between">
                            ${metric.label}
                            <span class="${trendColor}">${trendIcon}</span>
                        </div>
                        <div class="text-lg font-black text-gray-800 dark:text-white">${metric.value}</div>
                        ${metric.subtext ? `<div class="text-[10px] font-bold ${subtextColor}">${metric.subtext}</div>` : ''}
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        // Update Feedback Tab
        function updateFeedbackTab(vertical) {
            renderSentimentDashboard(vertical);
            renderFeedbackReviews(vertical);
        }

        // Set initial active tab
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelector('.tab-btn').click();
            renderTierProgress(); // Initialize tier progress ladder
            renderMetrics('restaurant'); // Initialize metrics
            updateFeedbackTab('restaurant'); // Initialize feedback tab
        });
    </script>
</body>
</html>